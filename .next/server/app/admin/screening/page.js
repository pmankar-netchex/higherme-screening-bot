(()=>{var e={};e.id=305,e.ids=[305],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7617:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>d}),t(673),t(1506),t(5866);var r=t(3191),a=t(8716),n=t(7922),i=t.n(n),o=t(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(s,l);let d=["",{children:["admin",{children:["screening",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,673)),"/Users/pranavmankar/Documents/Workspace/Vapi demo/app/admin/screening/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,1506)),"/Users/pranavmankar/Documents/Workspace/Vapi demo/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/pranavmankar/Documents/Workspace/Vapi demo/app/admin/screening/page.tsx"],m="/admin/screening/page",u={require:t,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/screening/page",pathname:"/admin/screening",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4489:(e,s,t)=>{Promise.resolve().then(t.bind(t,4909))},8441:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,2994,23)),Promise.resolve().then(t.t.bind(t,6114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,9671,23)),Promise.resolve().then(t.t.bind(t,1868,23)),Promise.resolve().then(t.t.bind(t,4759,23))},8431:()=>{},4909:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u});var r=t(326),a=t(7577),n=t(434),i=t(5047);function o({roleType:e,roleConfig:s,mandatoryQuestions:t,onUpdate:n,onUpdateMandatory:i}){let[o,l]=(0,a.useState)({name:"",department:"",screeningQuestions:[],evaluationCriteria:{}}),[d,c]=(0,a.useState)([]),[m,u]=(0,a.useState)(""),[x,h]=(0,a.useState)(""),g=(e,s)=>{let t=[...o.screeningQuestions];t[e]=s,l({...o,screeningQuestions:t})},p=e=>{let s=[...o.screeningQuestions];s.splice(e,1),l({...o,screeningQuestions:s})},b=(e,s)=>{let t=[...d];t[e]=s,c(t)},f=e=>{let s=[...d];s.splice(e,1),c(s)};return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:["Role Configuration: ",o.name]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Configure screening questions for ",o.name," role. Use the Evaluation Criteria tab to configure role-specific evaluation weights."]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Role Details"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role Name"}),r.jsx("input",{type:"text",value:o.name,onChange:e=>l({...o,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),r.jsx("input",{type:"text",value:o.department,onChange:e=>l({...o,department:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Mandatory Questions (All Roles)"}),r.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"These questions will be asked in all screening interviews regardless of role."}),d.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center mb-2",children:[r.jsx("input",{type:"text",value:e,onChange:e=>b(s,e.target.value),className:"flex-grow px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),r.jsx("button",{onClick:()=>f(s),className:"ml-2 p-1 bg-red-100 text-red-600 rounded hover:bg-red-200","aria-label":"Remove question",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},`mandatory-${s}`)),(0,r.jsxs)("div",{className:"flex mt-2",children:[r.jsx("input",{type:"text",value:x,onChange:e=>h(e.target.value),placeholder:"Add a mandatory question...",className:"flex-grow px-3 py-2 border border-gray-300 rounded-l-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),r.jsx("button",{onClick:()=>{x.trim()&&(c([...d,x.trim()]),h(""))},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-r-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Add"})]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Role-Specific Questions"}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mb-2",children:["These questions are specific to the ",o.name," role."]}),o.screeningQuestions.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center mb-2",children:[r.jsx("input",{type:"text",value:e,onChange:e=>g(s,e.target.value),className:"flex-grow px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),r.jsx("button",{onClick:()=>p(s),className:"ml-2 p-1 bg-red-100 text-red-600 rounded hover:bg-red-200","aria-label":"Remove question",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},`role-${s}`)),(0,r.jsxs)("div",{className:"flex mt-2",children:[r.jsx("input",{type:"text",value:m,onChange:e=>u(e.target.value),placeholder:"Add a role-specific question...",className:"flex-grow px-3 py-2 border border-gray-300 rounded-l-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),r.jsx("button",{onClick:()=>{m.trim()&&(l({...o,screeningQuestions:[...o.screeningQuestions,m.trim()]}),u(""))},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-r-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Add"})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{onClick:()=>{n(e,o),i(d)},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Save Configuration"})})]})}function l({vapiSettings:e,onUpdate:s}){let[t,n]=(0,a.useState)(e),[i,o]=(0,a.useState)(""),[l,d]=(0,a.useState)(!1);return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"AI Conversation Tone"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Customize how the AI assistant speaks and interacts with candidates during screening calls."})]}),(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Conversation Tone & Style"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Tone"}),(0,r.jsxs)("select",{value:i?"custom":t.conversationTone,onChange:e=>{let{value:s}=e.target;"custom"===s||(n({...t,conversationTone:s}),o("")),d(!0)},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"friendly and professional",children:"Friendly and Professional (Default)"}),r.jsx("option",{value:"warm and conversational",children:"Warm and Conversational"}),r.jsx("option",{value:"formal and structured",children:"Formal and Structured"}),r.jsx("option",{value:"casual and relaxed",children:"Casual and Relaxed"}),r.jsx("option",{value:"enthusiastic and energetic",children:"Enthusiastic and Energetic"}),r.jsx("option",{value:"custom",children:"Custom Tone..."})]})]}),""!==i||"custom"===t.conversationTone?(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Custom Tone Description"}),r.jsx("textarea",{value:i||"",onChange:e=>{let{value:s}=e.target;o(s),n({...t,conversationTone:s})},placeholder:"Describe the tone in detail, e.g., 'friendly but formal, with occasional humor'",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",rows:3})]}):null]})]}),l&&(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("h4",{className:"font-medium text-gray-700 mb-2 flex items-center justify-between",children:[r.jsx("span",{children:"Conversation Preview"}),r.jsx("button",{onClick:()=>d(!l),className:"text-xs text-blue-600 hover:text-blue-800",children:"Hide Preview"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[r.jsx("h5",{className:"text-sm font-semibold text-gray-700 mb-2",children:"The AI will use this tone throughout the conversation:"}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("div",{className:"bg-blue-50 p-3 rounded-md mb-4",children:[r.jsx("p",{className:"text-sm font-medium text-blue-800 mb-1",children:"Greeting Examples:"}),r.jsx("ul",{className:"list-disc pl-5 space-y-1",children:(()=>{let e=t.conversationTone?.toLowerCase()||"friendly and professional",s={"friendly and professional":["Hi there! I'm the AI assistant conducting your screening today.","Welcome! I'll be asking you a few questions about your experience."],"warm and conversational":["Hello! How are you doing today? I'm excited to learn more about you!","Hi there! Thanks for taking the time to chat with me today."],"formal and structured":["Good day. I will be conducting your initial screening interview.","Thank you for your application. Let us proceed with the screening process."],"casual and relaxed":["Hey! Thanks for checking in today. Let's chat about your experience.","What's up? I'm going to ask you some quick questions about your background."],"enthusiastic and energetic":["Hi there! Super excited to be talking with you about this amazing opportunity!","Welcome! I can't wait to hear all about your experience and skills!"],custom:["Custom greeting based on your tone settings","Another example of your custom tone in action"]},r=Object.keys(s).find(s=>e.includes(s)||s.includes(e))||"friendly and professional";return s[r]})().map((e,s)=>r.jsx("li",{className:"text-sm text-blue-700",children:e},s))})]}),(0,r.jsxs)("div",{className:"bg-indigo-50 p-3 rounded-md",children:[r.jsx("p",{className:"text-sm font-medium text-indigo-800 mb-1",children:"System Prompt Preview:"}),r.jsx("pre",{className:"text-xs text-indigo-700 whitespace-pre-wrap font-mono bg-indigo-100 p-2 rounded",children:(()=>{let e=t.conversationTone||"friendly and professional";return`You are an AI assistant conducting a screening interview for a Server position at a restaurant.
Your goal is to assess the candidate's experience, availability, and fit for the role in a ${e} manner.

IMPORTANT GUIDELINES:
- Keep the conversation brief (2-3 minutes) and focused on gathering key information.
- Use a ${e} tone throughout the conversation.
- Ask questions directly and one at a time, waiting for responses.
- Do not provide evaluative feedback to the candidate during the call.`})()})]})]})]})]}),r.jsx("div",{className:"mt-6",children:r.jsx("button",{onClick:()=>{s({conversationTone:t.conversationTone||"friendly and professional"})},className:"px-4 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Save Prompt Settings"})})]})}function d({roles:e,onUpdate:s}){let[t,n]=(0,a.useState)(""),[i,o]=(0,a.useState)({}),[l,d]=(0,a.useState)(""),[c,m]=(0,a.useState)(""),[u,x]=(0,a.useState)(0),[h,g]=(0,a.useState)(!1),[p,b]=(0,a.useState)({}),f=Object.values(i).reduce((e,s)=>e+s.weight,0),v=Math.max(0,parseFloat((1-f).toFixed(2))),y=(e,s)=>{let t=parseFloat(s.toFixed(2));o({...i,[e]:{...i[e],weight:t}})},j=(e,s)=>{o({...i,[e]:{...i[e],description:s}})},N=e=>{let s={...i};delete s[e],o(s)};return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Evaluation Criteria Configuration"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Configure evaluation criteria and weights for role-specific screening. Weights must sum to 1.0 (100%)."}),(0,r.jsxs)("div",{className:"mt-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Role"}),(0,r.jsxs)("select",{value:t,onChange:e=>n(e.target.value),className:"w-full max-w-xs px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"",children:"Choose a role..."}),Object.entries(e).map(([e,s])=>(0,r.jsxs)("option",{value:e,children:[s.name," (",s.department,")"]},e))]})]}),t&&r.jsx("div",{className:"mt-2 bg-blue-50 border border-blue-200 rounded-md p-3",children:(0,r.jsxs)("p",{className:"text-sm text-blue-800",children:[r.jsx("span",{className:"font-medium",children:"Total weight:"})," ",f.toFixed(2)," / 1.00",v>0&&(0,r.jsxs)("span",{className:"ml-2 text-green-700",children:["(",v.toFixed(2)," remaining)"]}),v<0&&(0,r.jsxs)("span",{className:"ml-2 text-red-700",children:["(exceeds by ",Math.abs(v).toFixed(2),")"]})]})})]}),t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h4",{className:"font-medium text-gray-700",children:"Current Criteria"}),r.jsx("button",{type:"button",onClick:()=>g(!0),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Add New Criterion"})]}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Criterion"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Weight"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Object.entries(i).map(([e,s])=>(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r.jsx("input",{type:"text",value:s.description,onChange:s=>j(e,s.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r.jsx("input",{type:"number",min:"0",max:"1",step:"0.05",value:s.weight,onChange:s=>y(e,parseFloat(s.target.value)||0),className:"w-20 px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:r.jsx("button",{onClick:()=>N(e),className:"text-red-600 hover:text-red-900 focus:outline-none",children:"Remove"})})]},e))})]})})]}),h&&(0,r.jsxs)("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Add New Criterion"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Key"}),r.jsx("input",{type:"text",value:l,onChange:e=>d(e.target.value),className:`w-full px-3 py-2 border ${p.key?"border-red-500":"border-gray-300"} rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500`,placeholder:"e.g. experience"}),p.key&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.key})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("input",{type:"text",value:c,onChange:e=>m(e.target.value),className:`w-full px-3 py-2 border ${p.description?"border-red-500":"border-gray-300"} rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500`,placeholder:"e.g. Previous restaurant experience"}),p.description&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.description})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Weight (Max: ",v.toFixed(2),")"]}),r.jsx("input",{type:"number",min:"0",max:v,step:"0.05",value:u,onChange:e=>x(parseFloat(e.target.value)||0),className:`w-full px-3 py-2 border ${p.weight?"border-red-500":"border-gray-300"} rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500`}),p.weight&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.weight})]})]}),(0,r.jsxs)("div",{className:"mt-4 flex justify-end",children:[r.jsx("button",{type:"button",onClick:()=>g(!1),className:"mr-2 px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),r.jsx("button",{type:"button",onClick:()=>{b({});let e=!1,s={};if(l.trim()?i[l]&&(s.key="A criterion with this key already exists",e=!0):(s.key="Criterion key is required",e=!0),c.trim()||(s.description="Description is required",e=!0),(u<=0||u>v)&&(s.weight=`Weight must be between 0 and ${v}`,e=!0),e){b(s);return}o({...i,[l]:{weight:parseFloat(u.toFixed(2)),description:c.trim()}}),d(""),m(""),x(0),g(!1)},className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Add Criterion"})]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("div",{children:0!==v&&Object.keys(i).length>0&&r.jsx("button",{type:"button",onClick:()=>{if(0===Object.keys(i).length)return;let e=1-f;if(0===e)return;let s=e/Object.keys(i).length;o(Object.entries(i).reduce((e,[t,r])=>({...e,[t]:{...r,weight:parseFloat((r.weight+s).toFixed(2))}}),{}))},className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Auto-Distribute Remaining Weight"})}),r.jsx("div",{children:r.jsx("button",{type:"button",onClick:()=>{if(!t)return;if(Math.abs(f-1)>.01){alert("Evaluation criteria weights must sum to 1.0");return}let r={...e[t],evaluationCriteria:i};s(t,r)},className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Save Changes"})})]})]}):r.jsx("div",{className:"text-center py-8",children:r.jsx("p",{className:"text-gray-500",children:"Please select a role to configure evaluation criteria."})})]})}function c({roles:e,onUpdate:s}){let[t,n]=(0,a.useState)([{id:"front-of-house",name:"Front of House",description:"Customer-facing positions",roles:["server","host","bartender"]},{id:"kitchen",name:"Kitchen",description:"Food preparation and cooking positions",roles:["cook","chef","prep-cook","dishwasher"]},{id:"management",name:"Management",description:"Leadership and supervisory positions",roles:["manager","assistant-manager","shift-supervisor"]},{id:"general",name:"General",description:"Multi-purpose and entry-level positions",roles:["general"]}]),[i,o]=(0,a.useState)([{id:"server",name:"Server",department:"front-of-house",description:"Takes orders and serves customers",defaultQuestions:["Do you have previous serving experience?","How comfortable are you handling cash transactions?","Can you describe your customer service experience?"],defaultCriteria:{experience:{weight:.3,description:"Previous restaurant or service experience"},availability:{weight:.4,description:"Flexibility with shifts and weekend work"},customerService:{weight:.3,description:"Communication skills and customer service attitude"}},isCustom:!1},{id:"cook",name:"Cook",department:"kitchen",description:"Prepares food according to recipes and standards",defaultQuestions:["What kitchen experience do you have?","Are you comfortable working in a fast-paced kitchen environment?","Do you have any food safety certifications?"],defaultCriteria:{experience:{weight:.5,description:"Kitchen and cooking experience"},availability:{weight:.3,description:"Shift flexibility and weekend availability"},teamwork:{weight:.2,description:"Teamwork and ability to work under pressure"}},isCustom:!1},{id:"host",name:"Host/Hostess",department:"front-of-house",description:"Greets guests and manages seating",defaultQuestions:["What customer service experience do you have?","How do you handle stressful situations with customers?","Are you comfortable using computer systems for reservations?"],defaultCriteria:{experience:{weight:.2,description:"Customer service or hospitality experience"},availability:{weight:.4,description:"Evening and weekend availability"},communication:{weight:.4,description:"Professional demeanor and communication skills"}},isCustom:!1},{id:"manager",name:"Manager",department:"management",description:"Oversees restaurant operations and staff",defaultQuestions:["What experience do you have managing restaurant staff?","How do you handle scheduling and staff conflicts?","What strategies do you use to improve customer satisfaction?"],defaultCriteria:{experience:{weight:.5,description:"Previous management experience"},availability:{weight:.2,description:"Scheduling flexibility"},leadership:{weight:.3,description:"Leadership and communication skills"}},isCustom:!1}]),[l,d]=(0,a.useState)("overview"),[c,m]=(0,a.useState)(""),[u,x]=(0,a.useState)(""),[h,g]=(0,a.useState)(!1),[p,b]=(0,a.useState)(!1),[f,v]=(0,a.useState)(""),[y,j]=(0,a.useState)(""),[N,w]=(0,a.useState)(null),k=(()=>{let s=Object.keys(e).length;return i.filter(e=>e.isCustom).length,{totalRoles:s,departmentStats:t.map(s=>({name:s.name,count:Object.values(e).filter(e=>e.department===s.name).length}))}})(),C=async r=>{let a=i.find(e=>e.id===r);if(!a)return;let n=a.id,o={name:a.name,department:t.find(e=>e.id===a.department)?.name||"General",screeningQuestions:[...a.defaultQuestions],evaluationCriteria:{...a.defaultCriteria}};try{if(!(await fetch("/api/admin/screening",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roleType:n,roleConfig:o,action:"add"})})).ok)throw Error("Failed to create role from template");let t={...e,[n]:o};s(t)}catch(e){console.error("Failed to create role from template:",e),alert("Failed to create role. Please try again.")}},S=async()=>{if(!f.trim()||!y)return;let r=f.trim().toLowerCase().replace(/\s+/g,"-");if(e[r]){alert("A role with this name already exists.");return}let a={name:f.trim(),department:t.find(e=>e.id===y)?.name||"General",screeningQuestions:["What experience do you have relevant to this position?","How do you handle high-pressure situations?","What are your strengths in a team environment?"],evaluationCriteria:{experience:{weight:.4,description:"Relevant experience for the role"},availability:{weight:.3,description:"Schedule flexibility"},skills:{weight:.3,description:"Communication and teamwork skills"}}};try{if(!(await fetch("/api/admin/screening",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roleType:r,roleConfig:a,action:"add"})})).ok)throw Error("Failed to create custom role");let t={...e,[r]:a};s(t),v(""),j(""),g(!1)}catch(e){console.error("Failed to create custom role:",e),alert("Failed to create role. Please try again.")}},T=async t=>{if(confirm(`Are you sure you want to delete the ${e[t]?.name} role? This action cannot be undone.`))try{if(!(await fetch("/api/admin/screening",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({roleType:t})})).ok)throw Error("Failed to delete role");let r={...e};delete r[t],s(r)}catch(e){console.error("Failed to delete role:",e),alert("Failed to delete role. Please try again.")}};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Role Type Management"}),r.jsx("p",{className:"text-gray-600",children:"Manage restaurant role types, departments, and templates for consistent hiring processes."})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[r.jsx("div",{className:"border-b border-gray-200",children:r.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"overview",label:"Overview",icon:"\uD83D\uDCCA"},{id:"departments",label:"Departments",icon:"\uD83C\uDFE2"},{id:"templates",label:"Role Templates",icon:"\uD83D\uDCCB"},{id:"roles",label:"Active Roles",icon:"\uD83D\uDC65"}].map(e=>(0,r.jsxs)("button",{onClick:()=>d(e.id),className:`py-4 px-1 border-b-2 font-medium text-sm ${l===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[r.jsx("span",{className:"mr-2",children:e.icon}),e.label]},e.id))})}),(0,r.jsxs)("div",{className:"p-6",children:["overview"===l&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx("div",{className:"bg-blue-50 rounded-lg p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-md flex items-center justify-center",children:r.jsx("span",{className:"text-blue-600 font-semibold",children:k.totalRoles})})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Total Roles"}),r.jsx("p",{className:"text-xs text-blue-600",children:"Active in system"})]})]})}),r.jsx("div",{className:"bg-green-50 rounded-lg p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-md flex items-center justify-center",children:r.jsx("span",{className:"text-green-600 font-semibold",children:t.length})})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-green-900",children:"Departments"}),r.jsx("p",{className:"text-xs text-green-600",children:"Organizational units"})]})]})}),r.jsx("div",{className:"bg-purple-50 rounded-lg p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-md flex items-center justify-center",children:r.jsx("span",{className:"text-purple-600 font-semibold",children:i.length})})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-purple-900",children:"Templates"}),r.jsx("p",{className:"text-xs text-purple-600",children:"Available templates"})]})]})}),r.jsx("div",{className:"bg-orange-50 rounded-lg p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-md flex items-center justify-center",children:r.jsx("span",{className:"text-orange-600 font-semibold",children:i.filter(e=>e.isCustom).length})})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-orange-900",children:"Custom Roles"}),r.jsx("p",{className:"text-xs text-orange-600",children:"User-created"})]})]})})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Roles by Department"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:k.departmentStats.map(e=>(0,r.jsxs)("div",{className:"bg-white rounded-md p-4 border",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("h4",{className:"font-medium text-gray-900",children:e.name}),r.jsx("span",{className:"text-2xl font-bold text-blue-600",children:e.count})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"active roles"})]},e.name))})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[r.jsx("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Create New Role"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"Start from scratch or use a template"}),r.jsx("button",{onClick:()=>g(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:"Create Role"})]}),(0,r.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[r.jsx("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Manage Templates"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"Edit existing role templates"}),r.jsx("button",{onClick:()=>d("templates"),className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"View Templates"})]})]})]}),"departments"===l&&(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex justify-between items-center",children:r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Department Management"})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map(s=>(0,r.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h4",{className:"text-lg font-medium text-gray-900",children:s.name}),(0,r.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[Object.values(e).filter(e=>e.department===s.name).length," roles"]})]}),r.jsx("p",{className:"text-gray-600 mb-4",children:s.description}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Active Roles:"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[Object.entries(e).filter(([,e])=>e.department===s.name).map(([e,s])=>r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:s.name},e)),0===Object.values(e).filter(e=>e.department===s.name).length&&r.jsx("span",{className:"text-xs text-gray-500 italic",children:"No active roles"})]})]})]},s.id))})]}),"templates"===l&&(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex justify-between items-center",children:r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Role Templates"})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(e=>(0,r.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h4",{className:"text-lg font-medium text-gray-900",children:e.name}),r.jsx("div",{className:"flex items-center space-x-2",children:e.isCustom&&r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:"Custom"})})]}),r.jsx("p",{className:"text-gray-600 mb-4",children:e.description}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Department: "}),r.jsx("span",{className:"text-sm text-gray-600",children:t.find(s=>s.id===e.department)?.name})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Questions: "}),r.jsx("span",{className:"text-sm text-gray-600",children:e.defaultQuestions.length})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Criteria: "}),r.jsx("span",{className:"text-sm text-gray-600",children:Object.keys(e.defaultCriteria).length})]})]}),(0,r.jsxs)("div",{className:"mt-6 flex space-x-2",children:[r.jsx("button",{onClick:()=>C(e.id),className:"flex-1 inline-flex justify-center items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:"Use Template"}),e.isCustom&&r.jsx("button",{onClick:()=>{w(e),b(!0)},className:"px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Edit"})]})]},e.id))})]}),"roles"===l&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Active Roles"}),(0,r.jsxs)("button",{onClick:()=>g(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[r.jsx("svg",{className:"-ml-1 mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Role"]})]}),r.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:r.jsx("ul",{className:"divide-y divide-gray-200",children:Object.entries(e).map(([e,s])=>r.jsx("li",{children:r.jsx("div",{className:"px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-blue-600 font-semibold text-sm",children:s.name.charAt(0).toUpperCase()})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("h4",{className:"text-lg font-medium text-gray-900",children:s.name}),r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:s.department})]}),(0,r.jsxs)("div",{className:"mt-1 flex items-center space-x-4",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:[s.screeningQuestions.length," questions"]}),(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:[Object.keys(s.evaluationCriteria).length," criteria"]})]})]})]}),r.jsx("div",{className:"flex items-center space-x-2",children:r.jsx("button",{onClick:()=>T(e),className:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-red-700 bg-white hover:bg-red-50",children:"Delete"})})]})})},e))})})]})]})]}),h&&r.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Create New Role"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"newRoleName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Role Name"}),r.jsx("input",{type:"text",id:"newRoleName",value:f,onChange:e=>v(e.target.value),placeholder:"e.g., Bartender, Dishwasher",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"newRoleDepartment",className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),(0,r.jsxs)("select",{id:"newRoleDepartment",value:y,onChange:e=>j(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"",children:"Select a department..."}),t.map(e=>r.jsx("option",{value:e.id,children:e.name},e.id))]})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"This will create a new role with default screening questions and evaluation criteria."})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[r.jsx("button",{onClick:()=>{g(!1),v(""),j("")},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{onClick:S,disabled:!f.trim()||!y,className:`px-4 py-2 border border-transparent rounded-md text-white ${f.trim()&&y?"bg-blue-600 hover:bg-blue-700":"bg-blue-300 cursor-not-allowed"}`,children:"Create Role"})]})]})})]})}function m({vapiSettings:e,onUpdate:s}){let[t,n]=(0,a.useState)(e),[i,o]=(0,a.useState)(!1),l=(e,s,t)=>{n(r=>({...r,[e]:{...r[e],[s]:t}}))};return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Vapi AI Voice Settings"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Configure the voice, model, and transcriber settings for AI screening calls."})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("h4",{className:"font-medium text-gray-700 mb-2 flex items-center justify-between",children:["Voice Settings",r.jsx("button",{onClick:()=>o(!i),className:"text-xs text-blue-600 hover:text-blue-800",children:i?"Hide providers info":"Show providers info"})]}),i&&(0,r.jsxs)("div",{className:"mb-4 bg-blue-50 p-3 rounded-md text-sm",children:[r.jsx("p",{className:"font-medium text-blue-700 mb-1",children:"Available Providers:"}),(0,r.jsxs)("ul",{className:"list-disc pl-5 space-y-1 text-blue-700",children:[(0,r.jsxs)("li",{children:[r.jsx("span",{className:"font-medium",children:"PlayHT"}),": Natural-sounding voices with good emotional range"]}),(0,r.jsxs)("li",{children:[r.jsx("span",{className:"font-medium",children:"ElevenLabs"}),": High-quality, emotionally expressive voices"]}),(0,r.jsxs)("li",{children:[r.jsx("span",{className:"font-medium",children:"OpenAI"}),": Good quality voices with natural pacing"]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Voice Provider"}),(0,r.jsxs)("select",{value:t.voice.provider,onChange:e=>l("voice","provider",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"playht",children:"PlayHT"}),r.jsx("option",{value:"elevenlabs",children:"ElevenLabs"}),r.jsx("option",{value:"openai",children:"OpenAI"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Voice ID"}),r.jsx("input",{type:"text",value:t.voice.voiceId,onChange:e=>l("voice","voiceId",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., jennifer, alloy, nova"})]})]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"AI Model Settings"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model Provider"}),(0,r.jsxs)("select",{value:t.model.provider,onChange:e=>l("model","provider",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"openai",children:"OpenAI"}),r.jsx("option",{value:"anthropic",children:"Anthropic"}),r.jsx("option",{value:"azure",children:"Azure OpenAI"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model Name"}),(0,r.jsxs)("select",{value:t.model.model,onChange:e=>l("model","model",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"gpt-4",children:"GPT-4"}),r.jsx("option",{value:"gpt-4-turbo",children:"GPT-4 Turbo"}),r.jsx("option",{value:"gpt-3.5-turbo",children:"GPT-3.5 Turbo"}),r.jsx("option",{value:"claude-3-opus",children:"Claude 3 Opus"}),r.jsx("option",{value:"claude-3-sonnet",children:"Claude 3 Sonnet"})]})]})]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Transcription Settings"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transcriber"}),(0,r.jsxs)("select",{value:t.transcriber.provider,onChange:e=>l("transcriber","provider",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"deepgram",children:"Deepgram"}),r.jsx("option",{value:"whisper",children:"OpenAI Whisper"}),r.jsx("option",{value:"assembly",children:"AssemblyAI"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model"}),r.jsx("input",{type:"text",value:t.transcriber.model,onChange:e=>l("transcriber","model",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., nova-2"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Language"}),r.jsx("input",{type:"text",value:t.transcriber.language,onChange:e=>l("transcriber","language",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., en-US"})]})]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Conversation Settings"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Conversation Tone"}),(0,r.jsxs)("select",{name:"conversationTone",value:t.conversationTone,onChange:e=>{let{name:s,value:t}=e.target;n(e=>({...e,[s]:t}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"friendly and professional",children:"Friendly and Professional"}),r.jsx("option",{value:"warm and conversational",children:"Warm and Conversational"}),r.jsx("option",{value:"formal and structured",children:"Formal and Structured"}),r.jsx("option",{value:"casual and relaxed",children:"Casual and Relaxed"}),r.jsx("option",{value:"enthusiastic and energetic",children:"Enthusiastic and Energetic"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Call Duration (seconds)"}),r.jsx("input",{type:"number",name:"maxCallDuration",value:t.maxCallDuration,onChange:e=>{let{name:s,value:t}=e.target;n(e=>({...e,[s]:parseInt(t)}))},min:60,max:600,step:30,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[Math.floor(t.maxCallDuration/60)," minutes ",t.maxCallDuration%60," seconds"]})]})]})]}),r.jsx("div",{className:"mt-6",children:r.jsx("button",{onClick:()=>{s(t)},className:"px-4 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Save Voice Settings"})})]})}function u(){let e=(0,i.useSearchParams)().get("tab"),[s,t]=(0,a.useState)("voice"===e?"voice":"prompts"===e?"prompts":"evaluation"===e?"evaluation":"rolemanagement"===e?"rolemanagement":"roles"),[u,x]=(0,a.useState)(null),[h,g]=(0,a.useState)(""),[p,b]=(0,a.useState)(""),[f,v]=(0,a.useState)(!0),[y,j]=(0,a.useState)(!1),[N,w]=(0,a.useState)(!1),[k,C]=(0,a.useState)(""),[S,T]=(0,a.useState)(!1),A=async()=>{v(!0);try{let e=await fetch("/api/admin/screening");if(!e.ok)throw Error("Failed to fetch configuration");let s=await e.json();x({roles:s.roles,mandatoryQuestions:s.mandatoryQuestions,vapiSettings:s.vapiSettings}),!p&&Object.keys(s.roles).length>0&&b(Object.keys(s.roles)[0])}catch(e){console.error("Failed to load screening configuration:",e)}finally{v(!1)}},P=async(e,s)=>{if(u)try{if(x({...u,roles:{...u.roles,[e]:s}}),!(await fetch("/api/admin/screening",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roleType:e,roleConfig:s})})).ok)throw Error("Failed to update role configuration");j(!1)}catch(s){console.error(`Failed to update ${e} configuration:`,s),A()}},D=async e=>{if(u)try{if(x({...u,mandatoryQuestions:e}),!(await fetch("/api/admin/screening",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({mandatoryQuestions:e})})).ok)throw Error("Failed to update mandatory questions")}catch(e){console.error("Failed to update mandatory questions:",e),A()}},F=async e=>{if(u)try{let s={...u.vapiSettings,...e};if(x({...u,vapiSettings:s}),!(await fetch("/api/admin/screening",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({vapiSettings:s})})).ok)throw Error("Failed to update voice settings")}catch(e){console.error("Failed to update voice settings:",e),A()}},R=async()=>{if(!u||!h.trim())return;let e=h.trim().toLowerCase().replace(/\s+/g,"_");if(u.roles[e]){alert("A role with this name already exists.");return}let s={name:h.trim(),department:"General",screeningQuestions:["What experience do you have relevant to this position?","How do you handle high-pressure situations?","What are your strengths in a team environment?"],evaluationCriteria:{experience:{weight:.4,description:"Relevant experience for the role"},availability:{weight:.3,description:"Schedule flexibility"},softSkills:{weight:.3,description:"Communication and teamwork skills"}}};try{if(!(await fetch("/api/admin/screening",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roleType:e,roleConfig:s})})).ok)throw Error("Failed to add new role");x({...u,roles:{...u.roles,[e]:s}}),b(e),g(""),T(!1)}catch(e){console.error("Failed to add new role:",e)}},O=async()=>{if(!u||!k||!u.roles[k]){w(!1);return}try{if(!(await fetch("/api/admin/screening",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({roleType:k})})).ok)throw Error("Failed to delete role");let e={...u.roles};if(delete e[k],x({...u,roles:e}),p===k){let s=Object.keys(e);b(s.length>0?s[0]:"")}w(!1),C("")}catch(e){console.error("Failed to delete role:",e)}},M=e=>{C(e),w(!0)};return r.jsx("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx(n.default,{href:"/admin",className:"text-blue-600 hover:text-blue-800 mb-4 inline-block",children:"← Back to Admin Panel"}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Screening Configuration"}),r.jsx("p",{className:"text-gray-600",children:"Configure screening questions, evaluation criteria, and voice settings."})]}),r.jsx("div",{className:"mb-6 border-b border-gray-200",children:(0,r.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[r.jsx("button",{onClick:()=>t("roles"),className:`py-4 px-1 border-b-2 font-medium text-sm ${"roles"===s?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Role-Based Questions"}),r.jsx("button",{onClick:()=>t("voice"),className:`py-4 px-1 border-b-2 font-medium text-sm ${"voice"===s?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Voice AI Settings"}),r.jsx("button",{onClick:()=>t("prompts"),className:`py-4 px-1 border-b-2 font-medium text-sm ${"prompts"===s?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"AI Prompt Customization"}),r.jsx("button",{onClick:()=>t("evaluation"),className:`py-4 px-1 border-b-2 font-medium text-sm ${"evaluation"===s?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Evaluation Criteria"}),r.jsx("button",{onClick:()=>t("rolemanagement"),className:`py-4 px-1 border-b-2 font-medium text-sm ${"rolemanagement"===s?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Role Management"})]})}),f?(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),r.jsx("p",{className:"mt-3 text-gray-600",children:"Loading configuration..."})]}):u?(0,r.jsxs)(r.Fragment,{children:["roles"===s&&(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[r.jsx("div",{className:"lg:col-span-1",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Role Types"}),r.jsx("button",{onClick:()=>T(!0),className:"p-1 bg-blue-100 text-blue-600 rounded hover:bg-blue-200",title:"Add new role",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})]}),r.jsx("div",{className:"space-y-1",children:Object.entries(u.roles).map(([e,s])=>(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("button",{onClick:()=>b(e),className:`block w-full text-left px-3 py-2 rounded-md ${p===e?"bg-blue-50 text-blue-700 font-medium":"text-gray-700 hover:bg-gray-100"}`,children:s.name}),r.jsx("button",{onClick:()=>M(e),className:"p-1 text-gray-400 hover:text-red-500",title:`Delete ${s.name} role`,children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},e))})]})}),r.jsx("div",{className:"lg:col-span-3",children:p&&u.roles[p]?r.jsx(o,{roleType:p,roleConfig:u.roles[p],mandatoryQuestions:u.mandatoryQuestions,onUpdate:P,onUpdateMandatory:D}):(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:[r.jsx("svg",{className:"w-12 h-12 text-gray-400 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No role selected"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Select a role from the sidebar to configure its screening questions and evaluation criteria."}),r.jsx("div",{className:"mt-6",children:(0,r.jsxs)("button",{onClick:()=>T(!0),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[r.jsx("svg",{className:"-ml-1 mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add New Role"]})})]})})]}),"voice"===s&&u.vapiSettings&&r.jsx(m,{vapiSettings:u.vapiSettings,onUpdate:F}),"prompts"===s&&u.vapiSettings&&r.jsx(l,{vapiSettings:u.vapiSettings,onUpdate:F}),"evaluation"===s&&u.roles&&r.jsx(d,{roles:u.roles,onUpdate:P}),"rolemanagement"===s&&u.roles&&r.jsx(c,{roles:u.roles,onUpdate:e=>{x({...u,roles:e})}})]}):r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"text-red-500",children:"Failed to load configuration. Please refresh the page."})}),N&&r.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Confirm Deletion"}),(0,r.jsxs)("p",{className:"text-gray-500 mb-6",children:['Are you sure you want to delete the "',u?.roles[k]?.name,'" role? This action cannot be undone.']}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[r.jsx("button",{onClick:()=>w(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{onClick:O,className:"px-4 py-2 border border-transparent rounded-md text-white bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),S&&r.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Add New Role"}),(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("label",{htmlFor:"newRoleName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Role Name"}),r.jsx("input",{type:"text",id:"newRoleName",value:h,onChange:e=>g(e.target.value),placeholder:"e.g., Bartender, Dishwasher",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"This will create a new role with default screening questions and evaluation criteria."})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[r.jsx("button",{onClick:()=>T(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{onClick:R,disabled:!h.trim(),className:`px-4 py-2 border border-transparent rounded-md text-white ${h.trim()?"bg-blue-600 hover:bg-blue-700":"bg-blue-300 cursor-not-allowed"}`,children:"Add Role"})]})]})})]})})}},434:(e,s,t)=>{"use strict";t.d(s,{default:()=>a.a});var r=t(9404),a=t.n(r)},5047:(e,s,t)=>{"use strict";var r=t(7389);t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})},673:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(8570).createProxy)(String.raw`/Users/pranavmankar/Documents/Workspace/Vapi demo/app/admin/screening/page.tsx#default`)},1506:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o,metadata:()=>i});var r=t(9510),a=t(5384),n=t.n(a);t(7272);let i={title:"Restaurant Recruitment Platform",description:"AI-powered recruitment platform for restaurant hiring"};function o({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:n().className,children:r.jsx("div",{className:"min-h-screen bg-gray-50",children:e})})})}},7272:()=>{}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[276,892,404],()=>t(7617));module.exports=r})();