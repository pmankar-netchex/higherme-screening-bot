"use strict";(()=>{var e={};e.id=928,e.ids=[928],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},9979:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>g,patchFetch:()=>y,requestAsyncStorage:()=>f,routeModule:()=>p,serverHooks:()=>S,staticGenerationAsyncStorage:()=>m});var n={};r.r(n),r.d(n,{GET:()=>l,POST:()=>c});var i=r(9303),a=r(8716),o=r(670),s=r(7070),d=r(5709),u=r(6332);async function c(e){try{let t=await e.json();if(!t.firstName||!t.lastName||!t.email||!t.phone||!t.jobId)return s.NextResponse.json({error:"Missing required fields"},{status:400});let r=(0,d.l0)({firstName:t.firstName,lastName:t.lastName,email:t.email,phone:t.phone,resumeUrl:t.resumeUrl}),n=(0,u.W3)({candidateId:r.id,jobId:t.jobId,status:"submitted",submittedAt:new Date().toISOString(),timeline:[{step:"submitted",status:"completed",timestamp:new Date().toISOString(),notes:"Application submitted",performedBy:"candidate"}],feedback:{}});return s.NextResponse.json({candidate:r,application:n})}catch(e){return console.error("Error creating candidate:",e),s.NextResponse.json({error:"Internal server error"},{status:500})}}async function l(e){try{let e=(0,d.m$)();return s.NextResponse.json(e)}catch(e){return console.error("Error fetching candidates:",e),s.NextResponse.json({error:"Internal server error"},{status:500})}}let p=new i.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/candidates/route",pathname:"/api/candidates",filename:"route",bundlePath:"app/api/candidates/route"},resolvedPagePath:"/Users/pranavmankar/Documents/Workspace/Vapi demo/app/api/candidates/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:f,staticGenerationAsyncStorage:m,serverHooks:S}=p,g="/api/candidates/route";function y(){return(0,o.patchFetch)({serverHooks:S,staticGenerationAsyncStorage:m})}},6332:(e,t,r)=>{r.d(t,{Jv:()=>f,PY:()=>g,Rl:()=>m,W3:()=>S,kP:()=>p});var n=r(2048),i=r.n(n),a=r(5315),o=r.n(a);let s=o().join(process.cwd(),"data"),d=o().join(s,"applications.json");function u(){i().existsSync(s)||i().mkdirSync(s,{recursive:!0})}function c(){if(u(),!i().existsSync(d))return i().writeFileSync(d,JSON.stringify([])),[];try{let e=i().readFileSync(d,"utf-8");return JSON.parse(e)}catch(e){return console.error("Error reading applications file:",e),[]}}function l(e){try{u(),i().writeFileSync(d,JSON.stringify(e,null,2))}catch(e){throw console.error("Error writing applications file:",e),e}}function p(e,t,r,n,i="system"){let a=c(),o=a.findIndex(t=>t.id===e);if(-1===o)return null;let s=a[o],d={step:r||s.currentStep||"unknown",status:"completed",timestamp:new Date().toISOString(),notes:n,completedBy:i,performedBy:i};return a[o]={...s,status:t,currentStep:r||s.currentStep,timeline:[...s.timeline,d],updatedAt:new Date().toISOString()},l(a),a[o]}function f(e){return c().find(t=>t.id===e)||null}function m(){return c()}function S(e){let t=c(),r={...e,id:`app-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return t.push(r),l(t),r}function g(e){return c().filter(t=>t.candidateId===e)}},5709:(e,t,r)=>{r.d(t,{Zb:()=>f,l0:()=>S,m$:()=>m,nf:()=>p,og:()=>g});var n=r(2048),i=r.n(n),a=r(5315),o=r.n(a);let s=o().join(process.cwd(),"data"),d=o().join(s,"candidates.json");function u(){i().existsSync(s)||i().mkdirSync(s,{recursive:!0})}function c(){if(u(),!i().existsSync(d))return i().writeFileSync(d,JSON.stringify([])),[];try{let e=i().readFileSync(d,"utf-8");return JSON.parse(e)}catch(e){return console.error("Error reading candidates file:",e),[]}}function l(e){try{u(),i().writeFileSync(d,JSON.stringify(e,null,2))}catch(e){throw console.error("Error writing candidates file:",e),e}}function p(e,t,r){let n=c(),i=n.findIndex(t=>t.id===e);return -1===i?(console.error(`Candidate with ID ${e} not found`),null):(n[i]={...n[i],screeningSummary:t,screeningId:r,updatedAt:new Date().toISOString()},l(n),n[i])}function f(e){return c().find(t=>t.id===e)||null}function m(){return c()}function S(e){let t=c(),r={id:`candidate-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),...e};return t.push(r),l(t),r}function g(e,t){let r=c(),n=r.findIndex(t=>t.id===e);return -1===n?null:(r[n]={...r[n],...t,updatedAt:new Date().toISOString()},l(r),r[n])}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[276,972],()=>r(9979));module.exports=n})();