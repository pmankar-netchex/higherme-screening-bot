"use strict";(()=>{var e={};e.id=523,e.ids=[523],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},9177:(e,t,i)=>{i.r(t),i.d(t,{originalPathname:()=>g,patchFetch:()=>f,requestAsyncStorage:()=>l,routeModule:()=>d,serverHooks:()=>m,staticGenerationAsyncStorage:()=>u});var n={};i.r(n),i.d(n,{PATCH:()=>c});var r=i(9303),s=i(8716),a=i(670),p=i(7070),o=i(8832);async function c(e,{params:t}){try{let i=t.applicationId,n=await e.json(),r=(0,o.Jv)(i);if(!r)return p.NextResponse.json({error:"Application not found"},{status:404});let s=["status","currentStep"],a={};if(Object.keys(n).forEach(e=>{s.includes(e)&&(a[e]=n[e])}),a.status&&a.status!==r.status){let e=new Date().toISOString();a.timeline||(a.timeline=[...r.timeline]),a.timeline.push({step:{screening_scheduled:"screening_call_pending",interview_scheduled:"recruiter_review",hired:"process_complete",rejected:"process_complete"}[a.status]||r.currentStep,status:"completed",timestamp:e,notes:`Application status changed to ${a.status.replace(/_/g," ")}`,performedBy:"recruiter"})}let c=(0,o.li)(i,a);return p.NextResponse.json({success:!0,data:c})}catch(e){return console.error("Error updating application:",e),p.NextResponse.json({error:"Failed to update application"},{status:500})}}let d=new r.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/applications/[applicationId]/status/route",pathname:"/api/applications/[applicationId]/status",filename:"route",bundlePath:"app/api/applications/[applicationId]/status/route"},resolvedPagePath:"/Users/pranavmankar/Documents/Workspace/Vapi demo/app/api/applications/[applicationId]/status/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:l,staticGenerationAsyncStorage:u,serverHooks:m}=d,g="/api/applications/[applicationId]/status/route";function f(){return(0,a.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:u})}},8832:(e,t,i)=>{i.d(t,{Jv:()=>u,Rl:()=>l,li:()=>m});var n=i(2048),r=i.n(n),s=i(5315),a=i.n(s);let p=a().join(process.cwd(),"data","applications.json"),o=[{id:"app-001",candidateId:"candidate-001",jobId:"job-001",status:"screening_completed",currentStep:"screening_call_completed",timeline:[{step:"application_submitted",status:"completed",timestamp:"2024-01-15T10:30:00Z",notes:"Application received via job board"},{step:"resume_review",status:"completed",timestamp:"2024-01-15T11:00:00Z",notes:"Resume reviewed and approved",completedBy:"recruiter-001"},{step:"screening_call_completed",status:"completed",timestamp:"2024-01-15T14:30:00Z",notes:"Screening call completed successfully",completedBy:"system"},{step:"interview_scheduled",status:"pending"}],createdAt:"2024-01-15T10:30:00Z",updatedAt:"2024-01-15T14:30:00Z"},{id:"app-002",candidateId:"candidate-002",jobId:"job-002",status:"screening_scheduled",currentStep:"screening_call_pending",timeline:[{step:"application_submitted",status:"completed",timestamp:"2024-01-16T09:15:00Z",notes:"Application received"},{step:"resume_review",status:"completed",timestamp:"2024-01-16T10:00:00Z",notes:"Resume approved for screening",completedBy:"recruiter-001"},{step:"screening_call_pending",status:"in_progress",timestamp:"2024-01-16T10:30:00Z",notes:"Screening call link sent to candidate"}],createdAt:"2024-01-16T09:15:00Z",updatedAt:"2024-01-16T10:30:00Z"}];function c(){let e=a().join(process.cwd(),"data");r().existsSync(e)||r().mkdirSync(e,{recursive:!0})}function d(){try{if(c(),r().existsSync(p)){let e=r().readFileSync(p,"utf8");return JSON.parse(e)}return r().writeFileSync(p,JSON.stringify(o,null,2)),o}catch(e){return console.error("Error reading applications file:",e),o}}function l(){return d()}function u(e){return d().find(t=>t.id===e)||null}function m(e,t){let i=d(),n=i.findIndex(t=>t.id===e);return -1===n?null:(i[n]={...i[n],...t,updatedAt:new Date().toISOString()},function(e){try{c(),r().writeFileSync(p,JSON.stringify(e,null,2))}catch(e){console.error("Error writing applications file:",e)}}(i),i[n])}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),n=t.X(0,[276,972],()=>i(9177));module.exports=n})();