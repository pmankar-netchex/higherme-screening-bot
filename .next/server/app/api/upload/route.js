"use strict";(()=>{var e={};e.id=998,e.ids=[998],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},9729:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>j,patchFetch:()=>y,requestAsyncStorage:()=>v,routeModule:()=>w,serverHooks:()=>h,staticGenerationAsyncStorage:()=>g});var o={};t.r(o),t.d(o,{GET:()=>x,POST:()=>f});var a=t(9303),s=t(8716),n=t(670),i=t(7070);let u=require("fs/promises");var p=t(2048),d=t(5315),l=t.n(d);let c=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],m=[".pdf",".doc",".docx"];async function f(e){try{let r=await e.formData(),t=r.get("resume"),o=r.get("candidateId");if(!t)return i.NextResponse.json({error:"No file uploaded"},{status:400});if(!o)return i.NextResponse.json({error:"Candidate ID is required"},{status:400});if(t.size>5242880)return i.NextResponse.json({error:"File size must be less than 5MB"},{status:400});if(!c.includes(t.type))return i.NextResponse.json({error:"Only PDF, DOC, and DOCX files are allowed"},{status:400});let a=l().extname(t.name).toLowerCase();if(!m.includes(a))return i.NextResponse.json({error:"Invalid file extension. Only .pdf, .doc, and .docx are allowed"},{status:400});let s=t.name.replace(/[^a-zA-Z0-9.-]/g,"_"),n=Date.now(),d=`${o}_${n}_${s}`,f=l().join(process.cwd(),"public","uploads","resumes");(0,p.existsSync)(f)||await (0,u.mkdir)(f,{recursive:!0});let x=l().join(f,d),w=await t.arrayBuffer();return await (0,u.writeFile)(x,Buffer.from(w)),i.NextResponse.json({success:!0,filename:d,originalName:t.name,size:t.size,type:t.type,uploadPath:`/uploads/resumes/${d}`,uploadedAt:new Date().toISOString()})}catch(e){return console.error("File upload error:",e),i.NextResponse.json({error:"Failed to upload file"},{status:500})}}async function x(){return i.NextResponse.json({error:"Method not allowed"},{status:405})}let w=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/upload/route",pathname:"/api/upload",filename:"route",bundlePath:"app/api/upload/route"},resolvedPagePath:"/Users/pranavmankar/Documents/Workspace/Vapi demo/app/api/upload/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:v,staticGenerationAsyncStorage:g,serverHooks:h}=w,j="/api/upload/route";function y(){return(0,n.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:g})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[276,972],()=>t(9729));module.exports=o})();