"use strict";(()=>{var e={};e.id=918,e.ids=[918],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},9152:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>f,patchFetch:()=>S,requestAsyncStorage:()=>p,routeModule:()=>c,serverHooks:()=>g,staticGenerationAsyncStorage:()=>l});var n={};r.r(n),r.d(n,{POST:()=>d});var s=r(9303),i=r(8716),a=r(670),o=r(7070),u=r(2903);async function d(e){try{let{screeningId:t,status:r,...n}=await e.json();if(!t||!r)return o.NextResponse.json({error:"Missing required fields"},{status:400});let s=(0,u.fT)(t,r,n);if(!s)return o.NextResponse.json({error:"Screening not found"},{status:404});return o.NextResponse.json(s)}catch(e){return console.error("Error updating screening status:",e),o.NextResponse.json({error:"Failed to update screening status"},{status:500})}}let c=new s.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/screening/status/route",pathname:"/api/screening/status",filename:"route",bundlePath:"app/api/screening/status/route"},resolvedPagePath:"/Users/pranavmankar/Documents/Workspace/Vapi demo/app/api/screening/status/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:p,staticGenerationAsyncStorage:l,serverHooks:g}=c,f="/api/screening/status/route";function S(){return(0,a.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:l})}},2903:(e,t,r)=>{r.d(t,{$s:()=>w,K6:()=>f,fT:()=>l,fp:()=>g,mM:()=>m,z4:()=>S});var n=r(2048),s=r.n(n),i=r(5315),a=r.n(i);let o=a().join(process.cwd(),"data"),u=a().join(o,"screenings.json");function d(){s().existsSync(o)||s().mkdirSync(o,{recursive:!0})}function c(){if(d(),!s().existsSync(u))return s().writeFileSync(u,JSON.stringify([])),[];try{let e=s().readFileSync(u,"utf-8");return JSON.parse(e)}catch(e){return console.error("Error reading screenings file:",e),[]}}function p(e){try{d(),s().writeFileSync(u,JSON.stringify(e,null,2))}catch(e){throw console.error("Error writing screenings file:",e),e}}function l(e,t,r={}){let n=c(),s=n.findIndex(t=>t.id===e);if(-1===s)return null;if(n[s]={...n[s],status:t,...r,updatedAt:new Date().toISOString()},"completed"===t&&"completed"!==n[s].status&&(n[s].completedAt=new Date().toISOString(),n[s].startedAt)){let e=new Date(n[s].startedAt).getTime(),t=new Date(n[s].completedAt).getTime();n[s].duration=Math.round((t-e)/1e3)}return"in_progress"===t&&"in_progress"!==n[s].status&&(n[s].startedAt=new Date().toISOString()),p(n),n[s]}function g(e,t){let r=c(),n=r.findIndex(t=>t.id===e);return -1===n?null:(r[n]={...r[n],summary:t,updatedAt:new Date().toISOString()},p(r),r[n])}function f(){return c()}function S(e,t,r,n={}){let s=c(),i=`screening_${Date.now()}`,a=new Date().toISOString(),o={id:i,applicationId:e,candidateId:t,jobId:r,status:"scheduled",scheduledAt:a,createdAt:a,updatedAt:a,...n};return s.push(o),p(s),o}function m(e,t){let r=c(),n=r.findIndex(t=>t.id===e);if(-1===n)return null;if(r[n]={...r[n],...t,updatedAt:new Date().toISOString()},t.status){if("completed"===t.status&&"completed"!==r[n].status&&(r[n].completedAt=new Date().toISOString(),r[n].startedAt)){let e=new Date(r[n].startedAt).getTime(),t=new Date(r[n].completedAt).getTime();r[n].duration=Math.round((t-e)/1e3)}"in_progress"===t.status&&"in_progress"!==r[n].status&&(r[n].startedAt=new Date().toISOString())}return p(r),r[n]}function w(e){let t=c();return e.candidateId&&(t=t.filter(t=>t.candidateId===e.candidateId)),e.jobId&&(t=t.filter(t=>t.jobId===e.jobId)),e.applicationId&&(t=t.filter(t=>t.applicationId===e.applicationId)),e.status&&(t=t.filter(t=>t.status===e.status)),t}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[276,972],()=>r(9152));module.exports=n})();