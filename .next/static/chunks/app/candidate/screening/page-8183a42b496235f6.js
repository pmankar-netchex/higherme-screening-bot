(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[381],{1849:function(e,t,r){Promise.resolve().then(r.bind(r,609))},609:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var a=r(7437),n=r(2265),s=r(9376);let i={voice:{provider:"playht",voiceId:"jennifer"},model:{provider:"openai",model:"gpt-4"},transcriber:{provider:"deepgram",model:"nova-2",language:"en-US"},conversationTone:"friendly and professional",maxCallDuration:180};async function o(e,t){try{let r=await fetch("/api/screening/summary",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({screeningId:e,summary:t})});if(!r.ok)throw Error("Error: ".concat(r.status));return!0}catch(e){return console.error("Failed to save screening summary:",e),!1}}async function l(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{let a=await fetch("/api/screening/status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({screeningId:e,status:t,...r})});if(!a.ok)throw Error("Error: ".concat(a.status));return!0}catch(e){return console.error("Failed to update screening status:",e),!1}}async function c(e,t,r){try{let a=await fetch("/api/screening",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({applicationId:e,candidateId:t,jobId:r,status:"scheduled"})});if(!a.ok)throw Error("Error: ".concat(a.status));return(await a.json()).id}catch(e){return console.error("Failed to create screening record:",e),null}}var d=r(7648),u=e=>{let{jobId:t,candidateId:s,applicationId:u,job:m,candidate:h,onCallStart:g,onCallEnd:x,onCallError:p}=e,[f,b]=(0,n.useState)(null),[y,v]=(0,n.useState)("initializing"),[w,j]=(0,n.useState)(!0),[k,N]=(0,n.useState)(!1),[S,C]=(0,n.useState)(0),[E,T]=(0,n.useState)(""),[A,L]=(0,n.useState)(!1),[I,M]=(0,n.useState)("general"),[P,W]=(0,n.useState)(null),[R,O]=(0,n.useState)(0),[q,H]=(0,n.useState)(!1),[z,B]=(0,n.useState)(null),[F,D]=(0,n.useState)(null);(0,n.useEffect)(()=>{m&&M(function(e,t){let r=e.toLowerCase();return(null==t?void 0:t.toLowerCase().includes("kitchen"))||r.includes("cook")||r.includes("chef")||r.includes("kitchen")?"cook":r.includes("server")||r.includes("waiter")||r.includes("waitress")?"server":r.includes("host")||r.includes("hostess")||r.includes("greeting")?"host":r.includes("manager")||r.includes("supervisor")||r.includes("lead")?"manager":"general"}(m.title,m.department))},[m]),(0,n.useEffect)(()=>{(async()=>{if(t&&s&&u)try{let e=await c(u,s,t);e&&(W(e),console.log("Created screening record with ID: ".concat(e)))}catch(e){console.error("Failed to create screening record:",e)}})()},[t,s,u]),(0,n.useEffect)(()=>((async()=>{try{j(!0);let{default:e}=await Promise.all([r.e(878),r.e(314)]).then(r.t.bind(r,4314,23)),t="3a1a825e-379e-45a9-ac3d-14150bf8bfe3";if(!t)throw Error("API key is missing. Please check environment variables.");let a=new e(t);b(a),a.on("call-start",()=>{v("Call active"),L(!0),T(""),g&&g();let e=1e3*i.maxCallDuration+3e4,t=setTimeout(()=>{if(console.log("Maximum call duration reached, ending call automatically"),f)try{f.stop()}catch(e){console.error("Error stopping call after timeout:",e)}},e);D(t),(async()=>{P&&await l(P,"in_progress")})()}),a.on("call-end",e=>{v("Call ended"),L(!1),H(!0),F&&(clearTimeout(F),D(null)),(async()=>{try{if(null==e?void 0:e.summary)try{let t=function(e){let t={experience:{evaluation:"",highlights:[]},availability:{morning:!1,evening:!1,weekends:!1,notes:""},transportation:{hasReliableTransportation:!1,notes:""},softSkills:{evaluation:"",highlights:[]},roleSpecific:{evaluation:"",strengths:[],areas_of_improvement:[]}};try{if(e.trim().startsWith("{")&&e.trim().endsWith("}"))try{let r=JSON.parse(e);return{...t,...r}}catch(e){}let r={...t},a=e.match(/Experience:([\s\S]+?)(?=Availability:|$)/);if(a&&a[1]){r.experience.evaluation=a[1].trim();let e=a[1].match(/[-•*]\s*(.+?)(?=[-•*]|$)/g);e&&(r.experience.highlights=e.map(e=>e.replace(/^[-•*]\s*/,"").trim()))}let n=e.match(/Availability:([\s\S]+?)(?=Transportation:|$)/);if(n&&n[1]){let e=n[1].toLowerCase();r.availability.morning=e.includes("morning")&&!e.includes("not available morning")&&!e.includes("unavailable morning"),r.availability.evening=e.includes("evening")&&!e.includes("not available evening")&&!e.includes("unavailable evening"),r.availability.weekends=e.includes("weekend")&&!e.includes("not available weekend")&&!e.includes("unavailable weekend"),r.availability.notes=n[1].trim()}let s=e.match(/Transportation:([\s\S]+?)(?=Soft Skills:|$)/);if(s&&s[1]){let e=s[1].toLowerCase();r.transportation.hasReliableTransportation=e.includes("reliable")||e.includes("yes")||e.includes("own car")||e.includes("has transportation"),r.transportation.notes=s[1].trim()}let i=e.match(/Soft Skills:([\s\S]+?)(?=Role-Specific:|$)/);if(i&&i[1]){r.softSkills.evaluation=i[1].trim();let e=i[1].match(/[-•*]\s*(.+?)(?=[-•*]|$)/g);e&&(r.softSkills.highlights=e.map(e=>e.replace(/^[-•*]\s*/,"").trim()))}let o=e.match(/Role-Specific:([\s\S]+?)(?=$)/);if(o&&o[1]){r.roleSpecific.evaluation=o[1].trim();let e=o[1].match(/Strengths:([\s\S]+?)(?=Areas for Improvement:|$)/);if(e&&e[1]){let t=e[1].match(/[-•*]\s*(.+?)(?=[-•*]|$)/g);t&&(r.roleSpecific.strengths=t.map(e=>e.replace(/^[-•*]\s*/,"").trim()))}let t=o[1].match(/Areas for Improvement:([\s\S]+?)(?=$)/);if(t&&t[1]){let e=t[1].match(/[-•*]\s*(.+?)(?=[-•*]|$)/g);e&&(r.roleSpecific.areas_of_improvement=e.map(e=>e.replace(/^[-•*]\s*/,"").trim()))}}return r}catch(e){return console.error("Error parsing screening summary:",e),t}}(e.summary);B(t),P&&await o(P,t)}catch(e){console.error("Error parsing call summary:",e)}P&&await l(P,"completed",{transcript:(null==e?void 0:e.transcript)||"",audioUrl:(null==e?void 0:e.audioUrl)||""}),x&&x({summary:null==e?void 0:e.summary,transcript:null==e?void 0:e.transcript,audioUrl:null==e?void 0:e.audioUrl,parsedSummary:z})}catch(e){console.error("Error processing call summary:",e)}finally{H(!1)}})()}),a.on("speech-start",()=>{N(!0)}),a.on("speech-end",()=>{N(!1)}),a.on("volume-level",e=>{C(e)}),a.on("error",e=>{var t,r,a,n,s,i,o,c;console.error("Vapi error:",e),(null==e?void 0:null===(r=e.error)||void 0===r?void 0:null===(t=r.message)||void 0===t?void 0:t.includes("card details"))||(null==e?void 0:null===(n=e.error)||void 0===n?void 0:null===(a=n.message)||void 0===a?void 0:a.includes("payment"))?T("Payment required. Please contact the administrator."):(null==e?void 0:null===(s=e.error)||void 0===s?void 0:s.statusCode)===401||(null==e?void 0:null===(i=e.error)||void 0===i?void 0:i.statusCode)===403?T("API key is invalid. Please contact the administrator."):T((null==e?void 0:null===(c=e.error)||void 0===c?void 0:c.message)||"An error occurred"),v("Error"),L(!1),(async()=>{if(P){var t;await l(P,"failed",{errorMessage:(null==e?void 0:null===(t=e.error)||void 0===t?void 0:t.message)||"Unknown error"})}})(),p&&p(Error((null==e?void 0:null===(o=e.error)||void 0===o?void 0:o.message)||"Vapi error occurred"))}),v("Ready")}catch(e){console.error("Error initializing Vapi:",e),T("Failed to initialize voice screening system."),v("Error"),p&&p(e)}finally{j(!1)}})(),()=>{if(F&&clearTimeout(F),f)try{f.stop()}catch(e){console.error("Error stopping call during cleanup:",e)}}),[g,x,p,P]);let U=(0,n.useCallback)(async()=>{if(!f){T("Voice screening system not initialized.");return}if(!h){T("Candidate information is missing.");return}if(!m){T("Job information is missing.");return}O(e=>e+1);try{v("Starting call..."),T("");let e=function(e,t,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i,n=function(e){switch(e){case"server":return["How would you handle a difficult customer situation?","Do you have experience with point-of-sale systems?","How do you prioritize tasks during busy service periods?"];case"cook":return["What types of cuisine do you have experience preparing?","How do you ensure food safety and proper handling?","How do you handle high-pressure cooking environments?"];case"host":return["What customer service experience do you have?","How do you handle stressful situations with customers?","Are you comfortable using computer systems for reservations?"];case"manager":return["Tell me about your experience managing restaurant staff","How do you handle scheduling and staff conflicts?","What strategies do you use to improve customer satisfaction?"];default:return["What experience do you have that is relevant to this position?","What are your strengths in a fast-paced work environment?","How would you contribute to a positive team atmosphere?"]}}(r),s=function(e,t,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.conversationTone;return"You are an AI assistant conducting a screening interview for a ".concat(e," position at a restaurant. \nYour goal is to assess the candidate's experience, availability, and fit for the role in a ").concat(a," manner.\n\nIMPORTANT GUIDELINES:\n- Keep the conversation brief (2-3 minutes) and focused on gathering key information.\n- Use a ").concat(a," tone throughout the conversation.\n- Ask questions directly and one at a time, waiting for responses.\n- Do not provide evaluative feedback to the candidate during the call.\n- Do not make hiring decisions or tell the candidate if they are qualified.\n- Collect information about their experience, availability, and specific requirements for the role.\n- End the call professionally by thanking them and explaining next steps.\n\nREQUIRED INFORMATION TO COLLECT:\n1. Relevant experience for the ").concat(e," position\n2. Availability for different shifts (morning/evening)\n3. Weekend availability\n4. Transportation arrangements\n5. Specific skills related to the ").concat(e," position\n\nPROCESS:\n1. Start with a brief introduction as the restaurant's AI screening assistant\n2. Ask about their relevant experience for the ").concat(e," position\n3. Ask the mandatory questions about availability and transportation\n4. Ask role-specific questions for the ").concat(e," position\n5. Thank them for their time and explain that a recruiter will review the screening results\n6. IMPORTANT: End the call appropriately by CLEARLY stating: \"Thank you for your time. We'll review your responses and get back to you soon. Have a great day!\" or similar ending phrase that signals the conversation is complete\n\nAfter the call, you will provide a structured summary of the candidate's responses focusing on their experience, availability, and skills relevant to the ").concat(e,' position. Do not provide an overall rating.\n\nIMPORTANT: At the end of the screening, you MUST clearly signal that the call is ending by using one of the following phrases: "Thank you for your time", "goodbye", "this concludes our screening", or "we\'ll be in touch". This ensures proper call termination.')}(e,r,n,a.conversationTone);return{name:"".concat(e," Screening"),firstMessage:"Hi ".concat(t,", I'm the AI screening assistant for the ").concat(e," position. This call will take about 2-3 minutes, and will be recorded for quality and training purposes. I'll be asking you some questions about your experience and availability. Let's get started. Could you tell me about your relevant experience for this ").concat(e," role?"),transcriber:{provider:"deepgram",model:"nova-2",language:"en-US"},voice:{provider:"playht",voiceId:"jennifer"},model:{provider:"openai",model:"gpt-4",messages:[{role:"system",content:s}]},silenceTimeoutSeconds:15,maxDurationSeconds:a.maxCallDuration,endCallMessage:"Thank you for your time. We'll review your responses and get back to you soon. Have a great day!",endCallPhrases:["goodbye","thank you for your time","we'll be in touch","have a great day","that concludes our screening","this completes the interview"]}}(m.title,"".concat(h.firstName," ").concat(h.lastName),I);await f.start(e)}catch(e){console.error("Error starting call:",e),T("Failed to start screening call."),v("Error"),L(!1),p&&p(e)}},[f,h,m,I,p]),$=(0,n.useCallback)(()=>{if(f)try{F&&(clearTimeout(F),D(null)),f.stop(),v("Call ended")}catch(e){console.error("Error stopping call:",e),T("Failed to end call. Please try again.")}},[f,F]),_=(0,n.useCallback)(()=>{if(T(""),v("Ready"),R>=3){T("Maximum retry attempts reached. Please try again later or contact support.");return}U()},[U,R]);return w?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 bg-white rounded-lg shadow-sm",children:[(0,a.jsx)("div",{className:"animate-spin w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Initializing voice screening system..."})]}):q?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 bg-white rounded-lg shadow-sm",children:[(0,a.jsx)("div",{className:"animate-spin w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Processing your screening results..."}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"This may take a few moments"})]}):E?(0,a.jsxs)("div",{className:"p-6 bg-red-50 border border-red-200 rounded-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-red-800 mb-2",children:"Voice Screening Issue"}),(0,a.jsx)("p",{className:"text-red-600 mb-4",children:E}),(0,a.jsxs)("div",{className:"flex flex-col space-y-4",children:[R<3&&(0,a.jsxs)("button",{onClick:_,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center justify-center",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Retry Screening Call"]}),(0,a.jsx)(d.default,{href:"/candidate",className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md text-center hover:bg-gray-200 transition-colors",children:"Return to Job Listings"})]})]}):(0,a.jsxs)("div",{className:"flex flex-col bg-white rounded-lg shadow-md p-6",children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-3",children:"AI Voice Screening"}),(0,a.jsxs)("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium mb-4 ".concat(A?"bg-green-100 text-green-800":"Error"===y?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"),children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full mr-2 ".concat(A?"bg-green-600 animate-pulse":"Error"===y?"bg-red-600":"bg-blue-600")}),A?"Call Active":y]}),I&&(0,a.jsxs)("div",{className:"text-sm text-gray-500 mb-2",children:["Screening configured for: ",(0,a.jsxs)("span",{className:"font-medium text-gray-700 capitalize",children:[I," role"]})]}),(0,a.jsx)("p",{className:"text-gray-600 mb-2 max-w-lg mx-auto",children:A?"Please speak clearly and answer the questions. This screening will take approximately 2-3 minutes.":"The AI assistant will ask you questions about your experience, availability, and fit for the position."}),A&&(0,a.jsxs)("div",{className:"text-xs text-gray-500 mb-6 flex items-center justify-center space-x-1",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,a.jsx)("span",{children:"The call will end automatically after the assistant completes all questions"})]})]}),A&&(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-6 mb-6 text-center",children:[(0,a.jsx)("div",{className:"flex justify-center mb-3",children:(0,a.jsx)("div",{className:"flex items-center justify-center w-16 h-16 rounded-full ".concat(k?"bg-green-100":"bg-blue-100"),children:k?(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}):(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"})})})}),(0,a.jsx)("p",{className:"text-lg font-medium text-blue-800",children:k?"Assistant is speaking...":"Assistant is listening..."}),(0,a.jsx)("div",{className:"flex items-center gap-1 mt-2",children:Array.from({length:10},(e,t)=>(0,a.jsx)("div",{className:"w-2 h-5 rounded-sm transition-all ".concat(t/10<S?"bg-blue-500":"bg-gray-200")},t))})]}),(0,a.jsxs)("div",{className:"mt-auto flex flex-col items-center",children:[A?(0,a.jsxs)("div",{className:"flex flex-col gap-2 items-center w-full",children:[(0,a.jsxs)("button",{onClick:$,className:"w-full max-w-xs py-3 px-4 rounded-lg bg-red-600 hover:bg-red-700 text-white font-medium transition-colors flex items-center justify-center shadow-md",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"End Call"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Click to end the call manually"})]}):(0,a.jsxs)("button",{onClick:U,disabled:"Error"===y,className:"w-full max-w-xs py-3 px-4 rounded-lg flex items-center justify-center text-white font-medium ".concat("Error"===y?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 transition-colors"),children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),"Start Screening Call"]}),(0,a.jsx)("p",{className:"mt-4 text-sm text-gray-500",children:A?"Please complete the entire screening call for best results.":"Your call will be processed by our AI system to assess fit for the position."}),R>0&&!A&&(0,a.jsxs)("p",{className:"mt-2 text-xs text-gray-400",children:["Call attempts: ",R,"/3"]})]})]})};function m(){let e=(0,s.useSearchParams)(),t=e.get("jobId")||"",r=e.get("candidateId")||"",i=e.get("applicationId")||"",[o,l]=(0,n.useState)(null),[c,m]=(0,n.useState)(null),[h,g]=(0,n.useState)(!0),[x,p]=(0,n.useState)(null),[f,b]=(0,n.useState)(!1),[y,v]=(0,n.useState)(null),[w,j]=(0,n.useState)(null),[k,N]=(0,n.useState)(!1),[S,C]=(0,n.useState)(0),[E,T]=(0,n.useState)("");return((0,n.useEffect)(()=>{let e=async()=>{try{if(g(!0),p(null),t){let e=await fetch("/api/jobs/".concat(t));if(e.ok){let t=await e.json();l(t)}else{p("Failed to load job information");return}}if(r){let e=await fetch("/api/candidates/".concat(r));if(e.ok){let t=await e.json();m(t)}else{p("Failed to load candidate information");return}}}catch(e){p("An error occurred while loading data"),console.error("Error fetching data:",e)}finally{g(!1)}};t||r?e():g(!1)},[t,r]),t&&r&&i)?o&&c?f&&!k?(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"max-w-lg mx-auto",children:[(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 text-center mb-6",children:[(0,a.jsx)("svg",{className:"w-12 h-12 text-green-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Screening Complete!"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-2",children:["Thank you for completing your AI screening call for the ",o.title," position. Our recruiting team will review your application and reach out to you soon."]})]}),(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"How was your screening experience?"}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),console.log("Feedback submitted:",{rating:S,comment:E,candidateId:r,jobId:t,applicationId:i}),N(!0)},children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-gray-700 mb-2",children:"Rate your experience:"}),(0,a.jsx)("div",{className:"flex space-x-2",children:[1,2,3,4,5].map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>C(e),className:"w-10 h-10 rounded-full flex items-center justify-center ".concat(S>=e?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-400"),children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})},e))})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{htmlFor:"feedback",className:"block text-gray-700 mb-2",children:"Additional comments (optional):"}),(0,a.jsx)("textarea",{id:"feedback",value:E,onChange:e=>T(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Share your thoughts about the screening experience..."})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Submit Feedback"}),(0,a.jsx)(d.default,{href:"/candidate",className:"bg-gray-100 text-gray-700 px-6 py-2 rounded-md hover:bg-gray-200 transition-colors",children:"Skip"})]})]})]})]})}):k?(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"max-w-lg mx-auto bg-blue-50 border border-blue-200 rounded-lg p-6 text-center",children:[(0,a.jsx)("svg",{className:"w-12 h-12 text-blue-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Thank You!"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Your feedback has been submitted. We appreciate your input on our screening process."}),(0,a.jsx)(d.default,{href:"/candidate",className:"inline-block bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700",children:"Return to Job Listings"})]})}):(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"max-w-xl mx-auto",children:[(0,a.jsxs)(d.default,{href:"/candidate/apply/".concat(t),className:"text-blue-600 hover:text-blue-800 mb-6 inline-flex items-center",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Application"]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"AI Screening Interview"}),(0,a.jsxs)("p",{className:"text-gray-600",children:[o.title," position screening for ",c.firstName," ",c.lastName]})]}),(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat("active"===o.status?"bg-green-100 text-green-800 border border-green-200":"bg-gray-100 text-gray-800 border border-gray-200"),children:"active"===o.status?"Active Position":"Position Closed"})]}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-100 rounded-lg p-4 mb-6",children:[(0,a.jsxs)("h3",{className:"font-medium text-blue-800 mb-2 flex items-center",children:[(0,a.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"How it works:"]}),(0,a.jsxs)("ol",{className:"list-decimal list-inside text-sm text-blue-700 space-y-1 pl-4",children:[(0,a.jsx)("li",{children:'Click "Start Screening Call" when you\'re ready'}),(0,a.jsx)("li",{children:"The AI assistant will ask you questions about your experience and availability"}),(0,a.jsx)("li",{children:"Answer naturally as you would in a phone interview"}),(0,a.jsx)("li",{children:"The call will take approximately 2-3 minutes to complete"}),(0,a.jsx)("li",{children:"The call will end automatically when all questions are answered"}),(0,a.jsx)("li",{children:'You can also click the "End Call" button at any time if needed'}),(0,a.jsx)("li",{children:"Make sure you're in a quiet environment with a stable internet connection"})]})]})]}),(0,a.jsx)(u,{jobId:t,candidateId:r,applicationId:i,job:o,candidate:c,onCallStart:()=>{console.log("Screening call started")},onCallEnd:e=>{if(console.log("Screening call ended",e),b(!0),null==e?void 0:e.summary)try{j(e.parsedSummary||null)}catch(e){console.error("Error processing summary:",e)}window.scrollTo({top:0,behavior:"smooth"})},onCallError:e=>{console.error("Call error:",e),v(e)}})]})}):(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"max-w-lg mx-auto bg-yellow-50 border border-yellow-200 rounded-lg p-6 text-center",children:[(0,a.jsx)("svg",{className:"w-12 h-12 text-yellow-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01M12 2a10 10 0 100 20 10 10 0 000-20z"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Information Not Found"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"We couldn't find the job or candidate information. Please return to the job listings and try again."}),(0,a.jsx)(d.default,{href:"/candidate",className:"inline-block bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700",children:"Return to Job Listings"})]})}):(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"max-w-lg mx-auto bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[(0,a.jsx)("svg",{className:"w-12 h-12 text-red-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Missing Information"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Required parameters are missing. Please make sure you access this page through the proper application process."}),(0,a.jsx)(d.default,{href:"/candidate",className:"inline-block bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700",children:"Return to Job Listings"})]})})}},7648:function(e,t,r){"use strict";r.d(t,{default:function(){return n.a}});var a=r(2972),n=r.n(a)},9376:function(e,t,r){"use strict";var a=r(5475);r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=1849)}),_N_E=e.O()}]);