(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[712],{2842:function(e,t,s){Promise.resolve().then(s.bind(s,6831))},6831:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var r=s(7437),a=s(2265),l=s(7648);function n(e){var t,s,l;let{job:n,onSubmit:i,onCancel:o}=e,[c,d]=(0,a.useState)({title:"",department:"",description:"",requirements:[""],responsibilities:[""],shiftTypes:[],weekendRequired:!1,hourlyRate:"",status:"active"});(0,a.useEffect)(()=>{n&&d({title:n.title,department:n.department,description:n.description,requirements:n.requirements,responsibilities:n.responsibilities,shiftTypes:n.shiftTypes,weekendRequired:n.weekendRequired,hourlyRate:n.hourlyRate,status:n.status})},[n]);let u=e=>{let{name:t,value:s}=e.target;d(e=>({...e,[t]:s}))},m=e=>{let{value:t,checked:s}=e.target;d(e=>({...e,shiftTypes:s?[...e.shiftTypes||[],t]:(e.shiftTypes||[]).filter(e=>e!==t)}))},x=(e,t,s)=>{let r=[...c[e]||[]];r[t]=s,d(t=>({...t,[e]:r}))},h=e=>{d(t=>({...t,[e]:[...t[e]||[],""]}))},p=(e,t)=>{let s=[...c[e]||[]];s.splice(t,1),d(t=>({...t,[e]:s.length?s:[""]}))};return(0,r.jsxs)("form",{onSubmit:e=>{var t,s;e.preventDefault(),i({...c,requirements:(null===(t=c.requirements)||void 0===t?void 0:t.filter(e=>""!==e.trim()))||[],responsibilities:(null===(s=c.responsibilities)||void 0===s?void 0:s.filter(e=>""!==e.trim()))||[]})},className:"bg-white rounded-lg shadow-md p-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:n?"Edit Job":"Create New Job"}),(0,r.jsx)("p",{className:"text-gray-600",children:n?"Update the job information below":"Fill in the job details below to create a new job posting."})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"col-span-1",children:[(0,r.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Job Title*"}),(0,r.jsx)("input",{id:"title",name:"title",type:"text",value:c.title,onChange:u,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Restaurant Manager"})]}),(0,r.jsxs)("div",{className:"col-span-1",children:[(0,r.jsx)("label",{htmlFor:"department",className:"block text-sm font-medium text-gray-700 mb-1",children:"Department*"}),(0,r.jsx)("input",{id:"department",name:"department",type:"text",value:c.department,onChange:u,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Front of House"})]}),(0,r.jsxs)("div",{className:"col-span-1 md:col-span-2",children:[(0,r.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Job Description*"}),(0,r.jsx)("textarea",{id:"description",name:"description",rows:5,value:c.description,onChange:u,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Provide a detailed description of the job..."})]}),(0,r.jsxs)("div",{className:"col-span-1 md:col-span-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Requirements*"}),null===(t=c.requirements)||void 0===t?void 0:t.map((e,t)=>(0,r.jsxs)("div",{className:"flex mb-2",children:[(0,r.jsx)("input",{type:"text",value:e,onChange:e=>x("requirements",t,e.target.value),className:"flex-grow px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., 2+ years of restaurant experience"}),(0,r.jsx)("button",{type:"button",onClick:()=>p("requirements",t),className:"ml-2 px-2 py-1 bg-red-100 text-red-600 rounded hover:bg-red-200 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},"req-".concat(t))),(0,r.jsxs)("button",{type:"button",onClick:()=>h("requirements"),className:"mt-1 px-3 py-1 bg-gray-100 text-gray-700 rounded text-sm hover:bg-gray-200 flex items-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Requirement"]})]}),(0,r.jsxs)("div",{className:"col-span-1 md:col-span-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Responsibilities*"}),null===(s=c.responsibilities)||void 0===s?void 0:s.map((e,t)=>(0,r.jsxs)("div",{className:"flex mb-2",children:[(0,r.jsx)("input",{type:"text",value:e,onChange:e=>x("responsibilities",t,e.target.value),className:"flex-grow px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Manage daily restaurant operations"}),(0,r.jsx)("button",{type:"button",onClick:()=>p("responsibilities",t),className:"ml-2 px-2 py-1 bg-red-100 text-red-600 rounded hover:bg-red-200 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},"resp-".concat(t))),(0,r.jsxs)("button",{type:"button",onClick:()=>h("responsibilities"),className:"mt-1 px-3 py-1 bg-gray-100 text-gray-700 rounded text-sm hover:bg-gray-200 flex items-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Responsibility"]})]}),(0,r.jsxs)("div",{className:"col-span-1 md:col-span-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Shift Types*"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-4",children:["Morning","Afternoon","Evening","Night","Split","On-Call"].map(e=>(0,r.jsxs)("label",{className:"inline-flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",name:"shiftTypes",value:e,checked:(c.shiftTypes||[]).includes(e),onChange:m,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,r.jsx)("span",{className:"ml-2 text-gray-700",children:e})]},e))}),(null===(l=c.shiftTypes)||void 0===l?void 0:l.length)===0&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:"Please select at least one shift type"})]}),(0,r.jsx)("div",{className:"col-span-1",children:(0,r.jsxs)("label",{className:"inline-flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",name:"weekendRequired",checked:c.weekendRequired,onChange:e=>{let{name:t,checked:s}=e.target;d(e=>({...e,[t]:s}))},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,r.jsx)("span",{className:"ml-2 text-gray-700",children:"Weekend Availability Required"})]})}),(0,r.jsxs)("div",{className:"col-span-1",children:[(0,r.jsx)("label",{htmlFor:"hourlyRate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Hourly Rate*"}),(0,r.jsx)("input",{id:"hourlyRate",name:"hourlyRate",type:"text",value:c.hourlyRate,onChange:u,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., $15-20/hr or DOE"})]}),(0,r.jsxs)("div",{className:"col-span-1",children:[(0,r.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status*"}),(0,r.jsxs)("select",{id:"status",name:"status",value:c.status,onChange:u,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,r.jsx)("option",{value:"active",children:"Active"}),(0,r.jsx)("option",{value:"inactive",children:"Inactive"}),(0,r.jsx)("option",{value:"filled",children:"Filled"})]})]})]}),(0,r.jsxs)("div",{className:"mt-8 flex justify-end space-x-3",children:[(0,r.jsx)("button",{type:"button",onClick:o,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:n?"Update Job":"Create Job"})]})]})}function i(){let[e,t]=(0,a.useState)([]),[s,i]=(0,a.useState)(!1),[o,c]=(0,a.useState)(null),[d,u]=(0,a.useState)(!1),[m,x]=(0,a.useState)(null),[h,p]=(0,a.useState)(!0),[b,f]=(0,a.useState)("createdAt"),[g,j]=(0,a.useState)("desc"),[y,v]=(0,a.useState)("all");(0,a.useEffect)(()=>{N()},[]);let N=async()=>{p(!0);try{let e=await fetch("/api/jobs");if(!e.ok)throw Error("Failed to fetch jobs");let s=await e.json();t(s)}catch(e){console.error("Failed to load jobs:",e)}finally{p(!1)}},w=async e=>{try{let s=await fetch("/api/jobs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw Error("Failed to create job");let r=await s.json();t(e=>[r,...e]),i(!1)}catch(e){console.error("Failed to create job:",e)}},k=async e=>{if(o)try{let s=await fetch("/api/jobs",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,id:o.id})});if(!s.ok)throw Error("Failed to update job");let r=await s.json();t(e=>e.map(e=>e.id===o.id?r:e)),c(null),i(!1)}catch(e){console.error("Failed to update job:",e)}},C=e=>{c(e),i(!0)},q=async()=>{if(m)try{if(!(await fetch("/api/jobs?id=".concat(m),{method:"DELETE"})).ok)throw Error("Failed to delete job");t(e=>e.filter(e=>e.id!==m)),x(null),u(!1)}catch(e){console.error("Failed to delete job:",e)}},L=e=>{x(e),u(!0)},T=async e=>{o?await k(e):await w(e)},A=e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"inactive":default:return"bg-gray-100 text-gray-800";case"filled":return"bg-blue-100 text-blue-800"}},R=e=>{b===e?j("asc"===g?"desc":"asc"):(f(e),j("asc"))},S=e.filter(e=>"all"===y||e.status===y).sort((e,t)=>{let s=0;return"createdAt"===b?s=new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime():"title"===b||"department"===b?s=e[b].localeCompare(t[b]):"status"===b&&(s=e.status.localeCompare(t.status)),"asc"===g?s:-s});return(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)(l.default,{href:"/admin",className:"text-blue-600 hover:text-blue-800 mb-4 inline-block",children:"← Back to Admin Panel"}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Job Listings Management"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Create, edit, and manage job postings for your restaurant."})]}),(0,r.jsxs)("div",{className:"flex flex-wrap justify-between items-center mb-6 gap-4",children:[(0,r.jsx)("div",{children:(0,r.jsxs)("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create New Job"]})}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Filter:"}),(0,r.jsxs)("select",{value:y,onChange:e=>v(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,r.jsx)("option",{value:"all",children:"All Jobs"}),(0,r.jsx)("option",{value:"active",children:"Active"}),(0,r.jsx)("option",{value:"inactive",children:"Inactive"}),(0,r.jsx)("option",{value:"filled",children:"Filled"})]})]})]}),s&&(0,r.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center p-4",children:(0,r.jsx)("div",{className:"max-w-4xl w-full",children:(0,r.jsx)(n,{job:o||void 0,onSubmit:T,onCancel:()=>{i(!1),c(null)}})})}),d&&(0,r.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-xl p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Confirm Deletion"}),(0,r.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"Are you sure you want to delete this job? This action cannot be undone."}),(0,r.jsxs)("div",{className:"mt-4 flex justify-end space-x-3",children:[(0,r.jsx)("button",{type:"button",onClick:()=>u(!1),className:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Cancel"}),(0,r.jsx)("button",{type:"button",onClick:q,className:"px-3 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500",children:"Delete"})]})]})}),h?(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),(0,r.jsx)("p",{className:"mt-3 text-sm text-gray-600",children:"Loading jobs..."})]}):S.length>0?(0,r.jsx)("div",{className:"bg-white shadow-md rounded-lg overflow-hidden border border-gray-200",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>R("title"),children:(0,r.jsxs)("div",{className:"flex items-center",children:["Job Title","title"===b&&(0,r.jsx)("span",{className:"ml-1",children:"asc"===g?"↑":"↓"})]})}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>R("department"),children:(0,r.jsxs)("div",{className:"flex items-center",children:["Department","department"===b&&(0,r.jsx)("span",{className:"ml-1",children:"asc"===g?"↑":"↓"})]})}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>R("status"),children:(0,r.jsxs)("div",{className:"flex items-center",children:["Status","status"===b&&(0,r.jsx)("span",{className:"ml-1",children:"asc"===g?"↑":"↓"})]})}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>R("createdAt"),children:(0,r.jsxs)("div",{className:"flex items-center",children:["Created","createdAt"===b&&(0,r.jsx)("span",{className:"ml-1",children:"asc"===g?"↑":"↓"})]})}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,r.jsx)("div",{className:"font-medium text-gray-900",children:e.title}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:e.hourlyRate})]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.department}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(A(e.status)),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,r.jsx)("button",{onClick:()=>C(e),className:"text-blue-600 hover:text-blue-900 mr-4",children:"Edit"}),(0,r.jsx)("button",{onClick:()=>L(e.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},e.id))})]})})}):(0,r.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6 text-center",children:[(0,r.jsx)("svg",{className:"w-12 h-12 mx-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),(0,r.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No jobs found"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"all"!==y?"No ".concat(y," jobs found. Try changing the filter or create a new job."):"Get started by creating a new job posting."}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsxs)("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center mx-auto",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create New Job"]})})]})]})})}},7648:function(e,t,s){"use strict";s.d(t,{default:function(){return a.a}});var r=s(2972),a=s.n(r)}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=2842)}),_N_E=e.O()}]);