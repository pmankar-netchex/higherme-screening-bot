(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[305],{1431:function(e,t,s){Promise.resolve().then(s.bind(s,8082))},8082:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var r=s(7437),a=s(2265),n=s(7648),i=s(9376);function o(e){let{roleType:t,roleConfig:s,mandatoryQuestions:n,onUpdate:i,onUpdateMandatory:o}=e,[l,d]=(0,a.useState)({name:"",department:"",screeningQuestions:[],evaluationCriteria:{}}),[c,m]=(0,a.useState)([]),[u,x]=(0,a.useState)(""),[h,g]=(0,a.useState)("");(0,a.useEffect)(()=>{s&&d(s),n&&m(n)},[s,n]);let p=(e,t)=>{let s=[...l.screeningQuestions];s[e]=t,d({...l,screeningQuestions:s})},b=e=>{let t=[...l.screeningQuestions];t.splice(e,1),d({...l,screeningQuestions:t})},f=(e,t)=>{let s=[...c];s[e]=t,m(s)},v=e=>{let t=[...c];t.splice(e,1),m(t)};return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:["Role Configuration: ",l.name]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Configure screening questions for ",l.name," role. Use the Evaluation Criteria tab to configure role-specific evaluation weights."]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Role Details"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role Name"}),(0,r.jsx)("input",{type:"text",value:l.name,onChange:e=>d({...l,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),(0,r.jsx)("input",{type:"text",value:l.department,onChange:e=>d({...l,department:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Mandatory Questions (All Roles)"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"These questions will be asked in all screening interviews regardless of role."}),c.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center mb-2",children:[(0,r.jsx)("input",{type:"text",value:e,onChange:e=>f(t,e.target.value),className:"flex-grow px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),(0,r.jsx)("button",{onClick:()=>v(t),className:"ml-2 p-1 bg-red-100 text-red-600 rounded hover:bg-red-200","aria-label":"Remove question",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},"mandatory-".concat(t))),(0,r.jsxs)("div",{className:"flex mt-2",children:[(0,r.jsx)("input",{type:"text",value:h,onChange:e=>g(e.target.value),placeholder:"Add a mandatory question...",className:"flex-grow px-3 py-2 border border-gray-300 rounded-l-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),(0,r.jsx)("button",{onClick:()=>{h.trim()&&(m([...c,h.trim()]),g(""))},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-r-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Add"})]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Role-Specific Questions"}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mb-2",children:["These questions are specific to the ",l.name," role."]}),l.screeningQuestions.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center mb-2",children:[(0,r.jsx)("input",{type:"text",value:e,onChange:e=>p(t,e.target.value),className:"flex-grow px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),(0,r.jsx)("button",{onClick:()=>b(t),className:"ml-2 p-1 bg-red-100 text-red-600 rounded hover:bg-red-200","aria-label":"Remove question",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},"role-".concat(t))),(0,r.jsxs)("div",{className:"flex mt-2",children:[(0,r.jsx)("input",{type:"text",value:u,onChange:e=>x(e.target.value),placeholder:"Add a role-specific question...",className:"flex-grow px-3 py-2 border border-gray-300 rounded-l-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),(0,r.jsx)("button",{onClick:()=>{u.trim()&&(d({...l,screeningQuestions:[...l.screeningQuestions,u.trim()]}),x(""))},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-r-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Add"})]})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)("button",{onClick:()=>{i(t,l),o(c)},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Save Configuration"})})]})}function l(e){let{vapiSettings:t,onUpdate:s}=e,[n,i]=(0,a.useState)(t),[o,l]=(0,a.useState)(""),[d,c]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{t&&i({conversationTone:t.conversationTone})},[t]),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"AI Conversation Tone"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Customize how the AI assistant speaks and interacts with candidates during screening calls."})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Conversation Tone & Style"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Tone"}),(0,r.jsxs)("select",{value:o?"custom":n.conversationTone,onChange:e=>{let{value:t}=e.target;"custom"===t||(i({...n,conversationTone:t}),l("")),c(!0)},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,r.jsx)("option",{value:"friendly and professional",children:"Friendly and Professional (Default)"}),(0,r.jsx)("option",{value:"warm and conversational",children:"Warm and Conversational"}),(0,r.jsx)("option",{value:"formal and structured",children:"Formal and Structured"}),(0,r.jsx)("option",{value:"casual and relaxed",children:"Casual and Relaxed"}),(0,r.jsx)("option",{value:"enthusiastic and energetic",children:"Enthusiastic and Energetic"}),(0,r.jsx)("option",{value:"custom",children:"Custom Tone..."})]})]}),""!==o||"custom"===n.conversationTone?(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Custom Tone Description"}),(0,r.jsx)("textarea",{value:o||"",onChange:e=>{let{value:t}=e.target;l(t),i({...n,conversationTone:t})},placeholder:"Describe the tone in detail, e.g., 'friendly but formal, with occasional humor'",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",rows:3})]}):null]})]}),d&&(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("h4",{className:"font-medium text-gray-700 mb-2 flex items-center justify-between",children:[(0,r.jsx)("span",{children:"Conversation Preview"}),(0,r.jsx)("button",{onClick:()=>c(!d),className:"text-xs text-blue-600 hover:text-blue-800",children:"Hide Preview"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[(0,r.jsx)("h5",{className:"text-sm font-semibold text-gray-700 mb-2",children:"The AI will use this tone throughout the conversation:"}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("div",{className:"bg-blue-50 p-3 rounded-md mb-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-blue-800 mb-1",children:"Greeting Examples:"}),(0,r.jsx)("ul",{className:"list-disc pl-5 space-y-1",children:(()=>{var e;let t=(null===(e=n.conversationTone)||void 0===e?void 0:e.toLowerCase())||"friendly and professional",s={"friendly and professional":["Hi there! I'm the AI assistant conducting your screening today.","Welcome! I'll be asking you a few questions about your experience."],"warm and conversational":["Hello! How are you doing today? I'm excited to learn more about you!","Hi there! Thanks for taking the time to chat with me today."],"formal and structured":["Good day. I will be conducting your initial screening interview.","Thank you for your application. Let us proceed with the screening process."],"casual and relaxed":["Hey! Thanks for checking in today. Let's chat about your experience.","What's up? I'm going to ask you some quick questions about your background."],"enthusiastic and energetic":["Hi there! Super excited to be talking with you about this amazing opportunity!","Welcome! I can't wait to hear all about your experience and skills!"],custom:["Custom greeting based on your tone settings","Another example of your custom tone in action"]},r=Object.keys(s).find(e=>t.includes(e)||e.includes(t))||"friendly and professional";return s[r]})().map((e,t)=>(0,r.jsx)("li",{className:"text-sm text-blue-700",children:e},t))})]}),(0,r.jsxs)("div",{className:"bg-indigo-50 p-3 rounded-md",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-indigo-800 mb-1",children:"System Prompt Preview:"}),(0,r.jsx)("pre",{className:"text-xs text-indigo-700 whitespace-pre-wrap font-mono bg-indigo-100 p-2 rounded",children:(()=>{let e=n.conversationTone||"friendly and professional";return"You are an AI assistant conducting a screening interview for a Server position at a restaurant.\nYour goal is to assess the candidate's experience, availability, and fit for the role in a ".concat(e," manner.\n\nIMPORTANT GUIDELINES:\n- Keep the conversation brief (2-3 minutes) and focused on gathering key information.\n- Use a ").concat(e," tone throughout the conversation.\n- Ask questions directly and one at a time, waiting for responses.\n- Do not provide evaluative feedback to the candidate during the call.")})()})]})]})]})]}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)("button",{onClick:()=>{s({conversationTone:n.conversationTone||"friendly and professional"})},className:"px-4 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Save Prompt Settings"})})]})}function d(e){let{roles:t,onUpdate:s}=e,[n,i]=(0,a.useState)(""),[o,l]=(0,a.useState)({}),[d,c]=(0,a.useState)(""),[m,u]=(0,a.useState)(""),[x,h]=(0,a.useState)(0),[g,p]=(0,a.useState)(!1),[b,f]=(0,a.useState)({});(0,a.useEffect)(()=>{let e=Object.keys(t);e.length>0&&!n&&i(e[0])},[t,n]),(0,a.useEffect)(()=>{var e;n&&(null===(e=t[n])||void 0===e?void 0:e.evaluationCriteria)?l(t[n].evaluationCriteria):l({})},[n,t]);let v=Object.values(o).reduce((e,t)=>e+t.weight,0),y=Math.max(0,parseFloat((1-v).toFixed(2))),j=(e,t)=>{let s=parseFloat(t.toFixed(2));l({...o,[e]:{...o[e],weight:s}})},N=(e,t)=>{l({...o,[e]:{...o[e],description:t}})},w=e=>{let t={...o};delete t[e],l(t)};return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Evaluation Criteria Configuration"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Configure evaluation criteria and weights for role-specific screening. Weights must sum to 1.0 (100%)."}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Role"}),(0,r.jsxs)("select",{value:n,onChange:e=>i(e.target.value),className:"w-full max-w-xs px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,r.jsx)("option",{value:"",children:"Choose a role..."}),Object.entries(t).map(e=>{let[t,s]=e;return(0,r.jsxs)("option",{value:t,children:[s.name," (",s.department,")"]},t)})]})]}),n&&(0,r.jsx)("div",{className:"mt-2 bg-blue-50 border border-blue-200 rounded-md p-3",children:(0,r.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,r.jsx)("span",{className:"font-medium",children:"Total weight:"})," ",v.toFixed(2)," / 1.00",y>0&&(0,r.jsxs)("span",{className:"ml-2 text-green-700",children:["(",y.toFixed(2)," remaining)"]}),y<0&&(0,r.jsxs)("span",{className:"ml-2 text-red-700",children:["(exceeds by ",Math.abs(y).toFixed(2),")"]})]})})]}),n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-700",children:"Current Criteria"}),(0,r.jsx)("button",{type:"button",onClick:()=>p(!0),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Add New Criterion"})]}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Criterion"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Weight"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:Object.entries(o).map(e=>{let[t,s]=e;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,r.jsx)("input",{type:"text",value:s.description,onChange:e=>N(t,e.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,r.jsx)("input",{type:"number",min:"0",max:"1",step:"0.05",value:s.weight,onChange:e=>j(t,parseFloat(e.target.value)||0),className:"w-20 px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,r.jsx)("button",{onClick:()=>w(t),className:"text-red-600 hover:text-red-900 focus:outline-none",children:"Remove"})})]},t)})})]})})]}),g&&(0,r.jsxs)("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-700 mb-3",children:"Add New Criterion"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Key"}),(0,r.jsx)("input",{type:"text",value:d,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border ".concat(b.key?"border-red-500":"border-gray-300"," rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"),placeholder:"e.g. experience"}),b.key&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:b.key})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,r.jsx)("input",{type:"text",value:m,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border ".concat(b.description?"border-red-500":"border-gray-300"," rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"),placeholder:"e.g. Previous restaurant experience"}),b.description&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:b.description})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Weight (Max: ",y.toFixed(2),")"]}),(0,r.jsx)("input",{type:"number",min:"0",max:y,step:"0.05",value:x,onChange:e=>h(parseFloat(e.target.value)||0),className:"w-full px-3 py-2 border ".concat(b.weight?"border-red-500":"border-gray-300"," rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500")}),b.weight&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:b.weight})]})]}),(0,r.jsxs)("div",{className:"mt-4 flex justify-end",children:[(0,r.jsx)("button",{type:"button",onClick:()=>p(!1),className:"mr-2 px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,r.jsx)("button",{type:"button",onClick:()=>{f({});let e=!1,t={};if(d.trim()?o[d]&&(t.key="A criterion with this key already exists",e=!0):(t.key="Criterion key is required",e=!0),m.trim()||(t.description="Description is required",e=!0),(x<=0||x>y)&&(t.weight="Weight must be between 0 and ".concat(y),e=!0),e){f(t);return}l({...o,[d]:{weight:parseFloat(x.toFixed(2)),description:m.trim()}}),c(""),u(""),h(0),p(!1)},className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Add Criterion"})]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("div",{children:0!==y&&Object.keys(o).length>0&&(0,r.jsx)("button",{type:"button",onClick:()=>{if(0===Object.keys(o).length)return;let e=1-v;if(0===e)return;let t=e/Object.keys(o).length;l(Object.entries(o).reduce((e,s)=>{let[r,a]=s;return{...e,[r]:{...a,weight:parseFloat((a.weight+t).toFixed(2))}}},{}))},className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Auto-Distribute Remaining Weight"})}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{type:"button",onClick:()=>{if(!n)return;if(Math.abs(v-1)>.01){alert("Evaluation criteria weights must sum to 1.0");return}let e={...t[n],evaluationCriteria:o};s(n,e)},className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Save Changes"})})]})]}):(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("p",{className:"text-gray-500",children:"Please select a role to configure evaluation criteria."})})]})}function c(e){let{roles:t,onUpdate:s}=e,[n,i]=(0,a.useState)([{id:"front-of-house",name:"Front of House",description:"Customer-facing positions",roles:["server","host","bartender"]},{id:"kitchen",name:"Kitchen",description:"Food preparation and cooking positions",roles:["cook","chef","prep-cook","dishwasher"]},{id:"management",name:"Management",description:"Leadership and supervisory positions",roles:["manager","assistant-manager","shift-supervisor"]},{id:"general",name:"General",description:"Multi-purpose and entry-level positions",roles:["general"]}]),[o,l]=(0,a.useState)([{id:"server",name:"Server",department:"front-of-house",description:"Takes orders and serves customers",defaultQuestions:["Do you have previous serving experience?","How comfortable are you handling cash transactions?","Can you describe your customer service experience?"],defaultCriteria:{experience:{weight:.3,description:"Previous restaurant or service experience"},availability:{weight:.4,description:"Flexibility with shifts and weekend work"},customerService:{weight:.3,description:"Communication skills and customer service attitude"}},isCustom:!1},{id:"cook",name:"Cook",department:"kitchen",description:"Prepares food according to recipes and standards",defaultQuestions:["What kitchen experience do you have?","Are you comfortable working in a fast-paced kitchen environment?","Do you have any food safety certifications?"],defaultCriteria:{experience:{weight:.5,description:"Kitchen and cooking experience"},availability:{weight:.3,description:"Shift flexibility and weekend availability"},teamwork:{weight:.2,description:"Teamwork and ability to work under pressure"}},isCustom:!1},{id:"host",name:"Host/Hostess",department:"front-of-house",description:"Greets guests and manages seating",defaultQuestions:["What customer service experience do you have?","How do you handle stressful situations with customers?","Are you comfortable using computer systems for reservations?"],defaultCriteria:{experience:{weight:.2,description:"Customer service or hospitality experience"},availability:{weight:.4,description:"Evening and weekend availability"},communication:{weight:.4,description:"Professional demeanor and communication skills"}},isCustom:!1},{id:"manager",name:"Manager",department:"management",description:"Oversees restaurant operations and staff",defaultQuestions:["What experience do you have managing restaurant staff?","How do you handle scheduling and staff conflicts?","What strategies do you use to improve customer satisfaction?"],defaultCriteria:{experience:{weight:.5,description:"Previous management experience"},availability:{weight:.2,description:"Scheduling flexibility"},leadership:{weight:.3,description:"Leadership and communication skills"}},isCustom:!1}]),[d,c]=(0,a.useState)("overview"),[m,u]=(0,a.useState)(""),[x,h]=(0,a.useState)(""),[g,p]=(0,a.useState)(!1),[b,f]=(0,a.useState)(!1),[v,y]=(0,a.useState)(""),[j,N]=(0,a.useState)(""),[w,k]=(0,a.useState)(null),C=(()=>{let e=Object.keys(t).length;return o.filter(e=>e.isCustom).length,{totalRoles:e,departmentStats:n.map(e=>({name:e.name,count:Object.values(t).filter(t=>t.department===e.name).length}))}})(),S=async e=>{var r;let a=o.find(t=>t.id===e);if(!a)return;let i=a.id,l={name:a.name,department:(null===(r=n.find(e=>e.id===a.department))||void 0===r?void 0:r.name)||"General",screeningQuestions:[...a.defaultQuestions],evaluationCriteria:{...a.defaultCriteria}};try{if(!(await fetch("/api/admin/screening",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roleType:i,roleConfig:l,action:"add"})})).ok)throw Error("Failed to create role from template");let e={...t,[i]:l};s(e)}catch(e){console.error("Failed to create role from template:",e),alert("Failed to create role. Please try again.")}},T=async()=>{var e;if(!v.trim()||!j)return;let r=v.trim().toLowerCase().replace(/\s+/g,"-");if(t[r]){alert("A role with this name already exists.");return}let a={name:v.trim(),department:(null===(e=n.find(e=>e.id===j))||void 0===e?void 0:e.name)||"General",screeningQuestions:["What experience do you have relevant to this position?","How do you handle high-pressure situations?","What are your strengths in a team environment?"],evaluationCriteria:{experience:{weight:.4,description:"Relevant experience for the role"},availability:{weight:.3,description:"Schedule flexibility"},skills:{weight:.3,description:"Communication and teamwork skills"}}};try{if(!(await fetch("/api/admin/screening",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roleType:r,roleConfig:a,action:"add"})})).ok)throw Error("Failed to create custom role");let e={...t,[r]:a};s(e),y(""),N(""),p(!1)}catch(e){console.error("Failed to create custom role:",e),alert("Failed to create role. Please try again.")}},A=async e=>{var r;if(confirm("Are you sure you want to delete the ".concat(null===(r=t[e])||void 0===r?void 0:r.name," role? This action cannot be undone.")))try{if(!(await fetch("/api/admin/screening",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({roleType:e})})).ok)throw Error("Failed to delete role");let r={...t};delete r[e],s(r)}catch(e){console.error("Failed to delete role:",e),alert("Failed to delete role. Please try again.")}};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Role Type Management"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Manage restaurant role types, departments, and templates for consistent hiring processes."})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[(0,r.jsx)("div",{className:"border-b border-gray-200",children:(0,r.jsx)("nav",{className:"flex space-x-8 px-6",children:[{id:"overview",label:"Overview",icon:"\uD83D\uDCCA"},{id:"departments",label:"Departments",icon:"\uD83C\uDFE2"},{id:"templates",label:"Role Templates",icon:"\uD83D\uDCCB"},{id:"roles",label:"Active Roles",icon:"\uD83D\uDC65"}].map(e=>(0,r.jsxs)("button",{onClick:()=>c(e.id),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat(d===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,r.jsx)("span",{className:"mr-2",children:e.icon}),e.label]},e.id))})}),(0,r.jsxs)("div",{className:"p-6",children:["overview"===d&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,r.jsx)("div",{className:"bg-blue-50 rounded-lg p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-md flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-blue-600 font-semibold",children:C.totalRoles})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-blue-900",children:"Total Roles"}),(0,r.jsx)("p",{className:"text-xs text-blue-600",children:"Active in system"})]})]})}),(0,r.jsx)("div",{className:"bg-green-50 rounded-lg p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-md flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-green-600 font-semibold",children:n.length})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-green-900",children:"Departments"}),(0,r.jsx)("p",{className:"text-xs text-green-600",children:"Organizational units"})]})]})}),(0,r.jsx)("div",{className:"bg-purple-50 rounded-lg p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded-md flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-purple-600 font-semibold",children:o.length})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-purple-900",children:"Templates"}),(0,r.jsx)("p",{className:"text-xs text-purple-600",children:"Available templates"})]})]})}),(0,r.jsx)("div",{className:"bg-orange-50 rounded-lg p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-8 h-8 bg-orange-100 rounded-md flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-orange-600 font-semibold",children:o.filter(e=>e.isCustom).length})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-orange-900",children:"Custom Roles"}),(0,r.jsx)("p",{className:"text-xs text-orange-600",children:"User-created"})]})]})})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Roles by Department"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:C.departmentStats.map(e=>(0,r.jsxs)("div",{className:"bg-white rounded-md p-4 border",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),(0,r.jsx)("span",{className:"text-2xl font-bold text-blue-600",children:e.count})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"active roles"})]},e.name))})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[(0,r.jsx)("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Create New Role"}),(0,r.jsx)("p",{className:"text-gray-500 mb-4",children:"Start from scratch or use a template"}),(0,r.jsx)("button",{onClick:()=>p(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:"Create Role"})]}),(0,r.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[(0,r.jsx)("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Manage Templates"}),(0,r.jsx)("p",{className:"text-gray-500 mb-4",children:"Edit existing role templates"}),(0,r.jsx)("button",{onClick:()=>c("templates"),className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"View Templates"})]})]})]}),"departments"===d&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"flex justify-between items-center",children:(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Department Management"})}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:n.map(e=>(0,r.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h4",{className:"text-lg font-medium text-gray-900",children:e.name}),(0,r.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[Object.values(t).filter(t=>t.department===e.name).length," roles"]})]}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:e.description}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h5",{className:"text-sm font-medium text-gray-700",children:"Active Roles:"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[Object.entries(t).filter(t=>{let[,s]=t;return s.department===e.name}).map(e=>{let[t,s]=e;return(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:s.name},t)}),0===Object.values(t).filter(t=>t.department===e.name).length&&(0,r.jsx)("span",{className:"text-xs text-gray-500 italic",children:"No active roles"})]})]})]},e.id))})]}),"templates"===d&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"flex justify-between items-center",children:(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Role Templates"})}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(e=>{var t;return(0,r.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h4",{className:"text-lg font-medium text-gray-900",children:e.name}),(0,r.jsx)("div",{className:"flex items-center space-x-2",children:e.isCustom&&(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:"Custom"})})]}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:e.description}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Department: "}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:null===(t=n.find(t=>t.id===e.department))||void 0===t?void 0:t.name})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Questions: "}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:e.defaultQuestions.length})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Criteria: "}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:Object.keys(e.defaultCriteria).length})]})]}),(0,r.jsxs)("div",{className:"mt-6 flex space-x-2",children:[(0,r.jsx)("button",{onClick:()=>S(e.id),className:"flex-1 inline-flex justify-center items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:"Use Template"}),e.isCustom&&(0,r.jsx)("button",{onClick:()=>{k(e),f(!0)},className:"px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Edit"})]})]},e.id)})})]}),"roles"===d&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Active Roles"}),(0,r.jsxs)("button",{onClick:()=>p(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[(0,r.jsx)("svg",{className:"-ml-1 mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Role"]})]}),(0,r.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:(0,r.jsx)("ul",{className:"divide-y divide-gray-200",children:Object.entries(t).map(e=>{let[t,s]=e;return(0,r.jsx)("li",{children:(0,r.jsx)("div",{className:"px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-blue-600 font-semibold text-sm",children:s.name.charAt(0).toUpperCase()})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("h4",{className:"text-lg font-medium text-gray-900",children:s.name}),(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:s.department})]}),(0,r.jsxs)("div",{className:"mt-1 flex items-center space-x-4",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:[s.screeningQuestions.length," questions"]}),(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:[Object.keys(s.evaluationCriteria).length," criteria"]})]})]})]}),(0,r.jsx)("div",{className:"flex items-center space-x-2",children:(0,r.jsx)("button",{onClick:()=>A(t),className:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-red-700 bg-white hover:bg-red-50",children:"Delete"})})]})})},t)})})})]})]})]}),g&&(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Create New Role"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"newRoleName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Role Name"}),(0,r.jsx)("input",{type:"text",id:"newRoleName",value:v,onChange:e=>y(e.target.value),placeholder:"e.g., Bartender, Dishwasher",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"newRoleDepartment",className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),(0,r.jsxs)("select",{id:"newRoleDepartment",value:j,onChange:e=>N(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,r.jsx)("option",{value:"",children:"Select a department..."}),n.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"This will create a new role with default screening questions and evaluation criteria."})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,r.jsx)("button",{onClick:()=>{p(!1),y(""),N("")},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),(0,r.jsx)("button",{onClick:T,disabled:!v.trim()||!j,className:"px-4 py-2 border border-transparent rounded-md text-white ".concat(v.trim()&&j?"bg-blue-600 hover:bg-blue-700":"bg-blue-300 cursor-not-allowed"),children:"Create Role"})]})]})})]})}function m(e){let{vapiSettings:t,onUpdate:s}=e,[n,i]=(0,a.useState)(t),[o,l]=(0,a.useState)(!1);(0,a.useEffect)(()=>{t&&i(t)},[t]);let d=(e,t,s)=>{i(r=>({...r,[e]:{...r[e],[t]:s}}))};return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Vapi AI Voice Settings"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Configure the voice, model, and transcriber settings for AI screening calls."})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("h4",{className:"font-medium text-gray-700 mb-2 flex items-center justify-between",children:["Voice Settings",(0,r.jsx)("button",{onClick:()=>l(!o),className:"text-xs text-blue-600 hover:text-blue-800",children:o?"Hide providers info":"Show providers info"})]}),o&&(0,r.jsxs)("div",{className:"mb-4 bg-blue-50 p-3 rounded-md text-sm",children:[(0,r.jsx)("p",{className:"font-medium text-blue-700 mb-1",children:"Available Providers:"}),(0,r.jsxs)("ul",{className:"list-disc pl-5 space-y-1 text-blue-700",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("span",{className:"font-medium",children:"PlayHT"}),": Natural-sounding voices with good emotional range"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("span",{className:"font-medium",children:"ElevenLabs"}),": High-quality, emotionally expressive voices"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("span",{className:"font-medium",children:"OpenAI"}),": Good quality voices with natural pacing"]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Voice Provider"}),(0,r.jsxs)("select",{value:n.voice.provider,onChange:e=>d("voice","provider",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,r.jsx)("option",{value:"playht",children:"PlayHT"}),(0,r.jsx)("option",{value:"elevenlabs",children:"ElevenLabs"}),(0,r.jsx)("option",{value:"openai",children:"OpenAI"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Voice ID"}),(0,r.jsx)("input",{type:"text",value:n.voice.voiceId,onChange:e=>d("voice","voiceId",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., jennifer, alloy, nova"})]})]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"AI Model Settings"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model Provider"}),(0,r.jsxs)("select",{value:n.model.provider,onChange:e=>d("model","provider",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,r.jsx)("option",{value:"openai",children:"OpenAI"}),(0,r.jsx)("option",{value:"anthropic",children:"Anthropic"}),(0,r.jsx)("option",{value:"azure",children:"Azure OpenAI"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model Name"}),(0,r.jsxs)("select",{value:n.model.model,onChange:e=>d("model","model",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,r.jsx)("option",{value:"gpt-4",children:"GPT-4"}),(0,r.jsx)("option",{value:"gpt-4-turbo",children:"GPT-4 Turbo"}),(0,r.jsx)("option",{value:"gpt-3.5-turbo",children:"GPT-3.5 Turbo"}),(0,r.jsx)("option",{value:"claude-3-opus",children:"Claude 3 Opus"}),(0,r.jsx)("option",{value:"claude-3-sonnet",children:"Claude 3 Sonnet"})]})]})]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Transcription Settings"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transcriber"}),(0,r.jsxs)("select",{value:n.transcriber.provider,onChange:e=>d("transcriber","provider",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,r.jsx)("option",{value:"deepgram",children:"Deepgram"}),(0,r.jsx)("option",{value:"whisper",children:"OpenAI Whisper"}),(0,r.jsx)("option",{value:"assembly",children:"AssemblyAI"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model"}),(0,r.jsx)("input",{type:"text",value:n.transcriber.model,onChange:e=>d("transcriber","model",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., nova-2"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Language"}),(0,r.jsx)("input",{type:"text",value:n.transcriber.language,onChange:e=>d("transcriber","language",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., en-US"})]})]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Conversation Settings"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Conversation Tone"}),(0,r.jsxs)("select",{name:"conversationTone",value:n.conversationTone,onChange:e=>{let{name:t,value:s}=e.target;i(e=>({...e,[t]:s}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,r.jsx)("option",{value:"friendly and professional",children:"Friendly and Professional"}),(0,r.jsx)("option",{value:"warm and conversational",children:"Warm and Conversational"}),(0,r.jsx)("option",{value:"formal and structured",children:"Formal and Structured"}),(0,r.jsx)("option",{value:"casual and relaxed",children:"Casual and Relaxed"}),(0,r.jsx)("option",{value:"enthusiastic and energetic",children:"Enthusiastic and Energetic"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Call Duration (seconds)"}),(0,r.jsx)("input",{type:"number",name:"maxCallDuration",value:n.maxCallDuration,onChange:e=>{let{name:t,value:s}=e.target;i(e=>({...e,[t]:parseInt(s)}))},min:60,max:600,step:30,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[Math.floor(n.maxCallDuration/60)," minutes ",n.maxCallDuration%60," seconds"]})]})]})]}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)("button",{onClick:()=>{s(n)},className:"px-4 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Save Voice Settings"})})]})}function u(){var e;let t=(0,i.useSearchParams)().get("tab"),[s,u]=(0,a.useState)("voice"===t?"voice":"prompts"===t?"prompts":"evaluation"===t?"evaluation":"rolemanagement"===t?"rolemanagement":"roles"),[x,h]=(0,a.useState)(null),[g,p]=(0,a.useState)(""),[b,f]=(0,a.useState)(""),[v,y]=(0,a.useState)(!0),[j,N]=(0,a.useState)(!1),[w,k]=(0,a.useState)(!1),[C,S]=(0,a.useState)(""),[T,A]=(0,a.useState)(!1);(0,a.useEffect)(()=>{F()},[]);let F=async()=>{y(!0);try{let e=await fetch("/api/admin/screening");if(!e.ok)throw Error("Failed to fetch configuration");let t=await e.json();h({roles:t.roles,mandatoryQuestions:t.mandatoryQuestions,vapiSettings:t.vapiSettings}),!b&&Object.keys(t.roles).length>0&&f(Object.keys(t.roles)[0])}catch(e){console.error("Failed to load screening configuration:",e)}finally{y(!1)}},D=async(e,t)=>{if(x)try{if(h({...x,roles:{...x.roles,[e]:t}}),!(await fetch("/api/admin/screening",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roleType:e,roleConfig:t})})).ok)throw Error("Failed to update role configuration");N(!1)}catch(t){console.error("Failed to update ".concat(e," configuration:"),t),F()}},O=async e=>{if(x)try{if(h({...x,mandatoryQuestions:e}),!(await fetch("/api/admin/screening",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({mandatoryQuestions:e})})).ok)throw Error("Failed to update mandatory questions")}catch(e){console.error("Failed to update mandatory questions:",e),F()}},R=async e=>{if(x)try{let t={...x.vapiSettings,...e};if(h({...x,vapiSettings:t}),!(await fetch("/api/admin/screening",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({vapiSettings:t})})).ok)throw Error("Failed to update voice settings")}catch(e){console.error("Failed to update voice settings:",e),F()}},E=async()=>{if(!x||!g.trim())return;let e=g.trim().toLowerCase().replace(/\s+/g,"_");if(x.roles[e]){alert("A role with this name already exists.");return}let t={name:g.trim(),department:"General",screeningQuestions:["What experience do you have relevant to this position?","How do you handle high-pressure situations?","What are your strengths in a team environment?"],evaluationCriteria:{experience:{weight:.4,description:"Relevant experience for the role"},availability:{weight:.3,description:"Schedule flexibility"},softSkills:{weight:.3,description:"Communication and teamwork skills"}}};try{if(!(await fetch("/api/admin/screening",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roleType:e,roleConfig:t})})).ok)throw Error("Failed to add new role");h({...x,roles:{...x.roles,[e]:t}}),f(e),p(""),A(!1)}catch(e){console.error("Failed to add new role:",e)}},P=async()=>{if(!x||!C||!x.roles[C]){k(!1);return}try{if(!(await fetch("/api/admin/screening",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({roleType:C})})).ok)throw Error("Failed to delete role");let e={...x.roles};if(delete e[C],h({...x,roles:e}),b===C){let t=Object.keys(e);f(t.length>0?t[0]:"")}k(!1),S("")}catch(e){console.error("Failed to delete role:",e)}},L=e=>{S(e),k(!0)};return(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)(n.default,{href:"/admin",className:"text-blue-600 hover:text-blue-800 mb-4 inline-block",children:"‚Üê Back to Admin Panel"}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Screening Configuration"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Configure screening questions, evaluation criteria, and voice settings."})]}),(0,r.jsx)("div",{className:"mb-6 border-b border-gray-200",children:(0,r.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,r.jsx)("button",{onClick:()=>u("roles"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("roles"===s?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Role-Based Questions"}),(0,r.jsx)("button",{onClick:()=>u("voice"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("voice"===s?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Voice AI Settings"}),(0,r.jsx)("button",{onClick:()=>u("prompts"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("prompts"===s?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"AI Prompt Customization"}),(0,r.jsx)("button",{onClick:()=>u("evaluation"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("evaluation"===s?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Evaluation Criteria"}),(0,r.jsx)("button",{onClick:()=>u("rolemanagement"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("rolemanagement"===s?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Role Management"})]})}),v?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),(0,r.jsx)("p",{className:"mt-3 text-gray-600",children:"Loading configuration..."})]}):x?(0,r.jsxs)(r.Fragment,{children:["roles"===s&&(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Role Types"}),(0,r.jsx)("button",{onClick:()=>A(!0),className:"p-1 bg-blue-100 text-blue-600 rounded hover:bg-blue-200",title:"Add new role",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})]}),(0,r.jsx)("div",{className:"space-y-1",children:Object.entries(x.roles).map(e=>{let[t,s]=e;return(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("button",{onClick:()=>f(t),className:"block w-full text-left px-3 py-2 rounded-md ".concat(b===t?"bg-blue-50 text-blue-700 font-medium":"text-gray-700 hover:bg-gray-100"),children:s.name}),(0,r.jsx)("button",{onClick:()=>L(t),className:"p-1 text-gray-400 hover:text-red-500",title:"Delete ".concat(s.name," role"),children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},t)})})]})}),(0,r.jsx)("div",{className:"lg:col-span-3",children:b&&x.roles[b]?(0,r.jsx)(o,{roleType:b,roleConfig:x.roles[b],mandatoryQuestions:x.mandatoryQuestions,onUpdate:D,onUpdateMandatory:O}):(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:[(0,r.jsx)("svg",{className:"w-12 h-12 text-gray-400 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),(0,r.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No role selected"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Select a role from the sidebar to configure its screening questions and evaluation criteria."}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsxs)("button",{onClick:()=>A(!0),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,r.jsx)("svg",{className:"-ml-1 mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add New Role"]})})]})})]}),"voice"===s&&x.vapiSettings&&(0,r.jsx)(m,{vapiSettings:x.vapiSettings,onUpdate:R}),"prompts"===s&&x.vapiSettings&&(0,r.jsx)(l,{vapiSettings:x.vapiSettings,onUpdate:R}),"evaluation"===s&&x.roles&&(0,r.jsx)(d,{roles:x.roles,onUpdate:D}),"rolemanagement"===s&&x.roles&&(0,r.jsx)(c,{roles:x.roles,onUpdate:e=>{h({...x,roles:e})}})]}):(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("p",{className:"text-red-500",children:"Failed to load configuration. Please refresh the page."})}),w&&(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Confirm Deletion"}),(0,r.jsxs)("p",{className:"text-gray-500 mb-6",children:['Are you sure you want to delete the "',null==x?void 0:null===(e=x.roles[C])||void 0===e?void 0:e.name,'" role? This action cannot be undone.']}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,r.jsx)("button",{onClick:()=>k(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),(0,r.jsx)("button",{onClick:P,className:"px-4 py-2 border border-transparent rounded-md text-white bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),T&&(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Add New Role"}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"newRoleName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Role Name"}),(0,r.jsx)("input",{type:"text",id:"newRoleName",value:g,onChange:e=>p(e.target.value),placeholder:"e.g., Bartender, Dishwasher",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),(0,r.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"This will create a new role with default screening questions and evaluation criteria."})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,r.jsx)("button",{onClick:()=>A(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),(0,r.jsx)("button",{onClick:E,disabled:!g.trim(),className:"px-4 py-2 border border-transparent rounded-md text-white ".concat(g.trim()?"bg-blue-600 hover:bg-blue-700":"bg-blue-300 cursor-not-allowed"),children:"Add Role"})]})]})})]})})}},7648:function(e,t,s){"use strict";s.d(t,{default:function(){return a.a}});var r=s(2972),a=s.n(r)},9376:function(e,t,s){"use strict";var r=s(5475);s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=1431)}),_N_E=e.O()}]);