(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[791],{3387:function(e,s,a){Promise.resolve().then(a.bind(a,9206))},9206:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return l}});var n=a(7437),t=a(2265),r=a(9376),i=a(7648);function l(){let[e,s]=(0,t.useState)({screenings:[],candidates:[],jobs:[]}),[a,l]=(0,t.useState)(!0),[d,c]=(0,t.useState)("all"),o=(0,r.useSearchParams)().get("candidateId");(0,t.useEffect)(()=>{(async()=>{try{l(!0);let e=new URLSearchParams;o&&e.append("candidateId",o),"all"!==d&&e.append("status",d);let[a,n,t]=await Promise.all([fetch("/api/screening?".concat(e.toString())),fetch("/api/candidates"),fetch("/api/jobs")]);if(!a.ok||!n.ok||!t.ok)throw Error("Failed to fetch data");let[r,i,c]=await Promise.all([a.json(),n.json(),t.json()]);s({screenings:r,candidates:i,jobs:c})}catch(e){console.error("Error fetching screening data:",e)}finally{l(!1)}})()},[o,d]);let m=s=>{let a=e.candidates.find(e=>e.id===s);return a?"".concat(a.firstName," ").concat(a.lastName):"Unknown Candidate"},x=s=>{let a=e.jobs.find(e=>e.id===s);return a?a.title:"Unknown Job"},u=e=>{switch(e){case"scheduled":return"bg-yellow-100 text-yellow-800";case"in_progress":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},h=e=>e?"".concat(Math.floor(e/60),":").concat((e%60).toString().padStart(2,"0")):"N/A",g=e=>e?(0,n.jsxs)("div",{className:"text-sm",children:[(0,n.jsxs)("div",{className:"mb-2",children:[(0,n.jsx)("span",{className:"font-medium",children:"Experience:"})," ",e.experience.evaluation.substring(0,100),"..."]}),(0,n.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[(0,n.jsxs)("span",{className:"px-2 py-1 rounded text-xs ".concat(e.availability.morning?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:["Morning: ",e.availability.morning?"Available":"Not Available"]}),(0,n.jsxs)("span",{className:"px-2 py-1 rounded text-xs ".concat(e.availability.evening?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:["Evening: ",e.availability.evening?"Available":"Not Available"]}),(0,n.jsxs)("span",{className:"px-2 py-1 rounded text-xs ".concat(e.availability.weekends?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:["Weekends: ",e.availability.weekends?"Available":"Not Available"]})]}),e.roleSpecific.strengths.length>0&&(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium",children:"Strengths:"})," ",e.roleSpecific.strengths.join(", ")]})]}):(0,n.jsx)("span",{className:"text-gray-500",children:"No summary available"});return a?(0,n.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,n.jsxs)("div",{className:"flex items-center justify-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,n.jsx)("span",{className:"ml-2",children:"Loading screening data..."})]})}):(0,n.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Screening Calls"}),(0,n.jsx)("p",{className:"text-gray-600 mt-1",children:o?"Screenings for ".concat(m(o)):"All screening calls"})]}),(0,n.jsxs)(i.default,{href:"/recruiter",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[(0,n.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Dashboard"]})]}),(0,n.jsx)("div",{className:"bg-white rounded-lg shadow mb-6 p-4",children:(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Filter by status:"}),(0,n.jsxs)("select",{value:d,onChange:e=>c(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,n.jsx)("option",{value:"all",children:"All Statuses"}),(0,n.jsx)("option",{value:"scheduled",children:"Scheduled"}),(0,n.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,n.jsx)("option",{value:"completed",children:"Completed"}),(0,n.jsx)("option",{value:"failed",children:"Failed"})]})]})}),(0,n.jsx)("div",{className:"bg-white rounded-lg shadow",children:0===e.screenings.length?(0,n.jsxs)("div",{className:"p-6 text-center",children:[(0,n.jsx)("div",{className:"text-gray-500 mb-2",children:"No screening calls found"}),(0,n.jsx)("p",{className:"text-sm text-gray-400",children:o?"This candidate has no screening calls yet.":"No screening calls match your current filters."})]}):(0,n.jsx)("div",{className:"divide-y divide-gray-200",children:e.screenings.map(e=>(0,n.jsx)("div",{className:"p-6 hover:bg-gray-50",children:(0,n.jsxs)("div",{className:"flex items-start justify-between",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,n.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:m(e.candidateId)}),(0,n.jsx)("span",{className:"inline-flex px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(u(e.status)),children:e.status.replace("_"," ")})]}),(0,n.jsxs)("div",{className:"text-sm text-gray-600 mb-3",children:[(0,n.jsx)("span",{className:"font-medium",children:"Position:"})," ",x(e.jobId),(0,n.jsx)("span",{className:"mx-2",children:"•"}),(0,n.jsx)("span",{className:"font-medium",children:"Scheduled:"})," ",new Date(e.scheduledAt).toLocaleString(),e.duration&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"mx-2",children:"•"}),(0,n.jsx)("span",{className:"font-medium",children:"Duration:"})," ",h(e.duration)]})]}),e.summary&&(0,n.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-3",children:[(0,n.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Screening Summary"}),g(e.summary)]}),e.errorMessage&&(0,n.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-3",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("svg",{className:"w-4 h-4 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,n.jsxs)("span",{className:"text-sm text-red-700",children:["Error: ",e.errorMessage]})]})})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[e.transcript&&(0,n.jsxs)("button",{onClick:()=>window.open("data:text/plain;charset=utf-8,".concat(encodeURIComponent(e.transcript)),"_blank"),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",title:"View Transcript",children:[(0,n.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Transcript"]}),e.audioUrl&&(0,n.jsxs)("button",{onClick:()=>window.open(e.audioUrl,"_blank"),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",title:"Play Audio",children:[(0,n.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1.586a1 1 0 01.707.293l2.414 2.414a1 1 0 00.707.293H15a2 2 0 002-2V9a2 2 0 00-2-2h-1.586a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 009.586 4H8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Audio"]}),(0,n.jsx)(i.default,{href:"/recruiter/candidate/".concat(e.candidateId),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:"View Candidate"})]})]})},e.id))})})]})}},7648:function(e,s,a){"use strict";a.d(s,{default:function(){return t.a}});var n=a(2972),t=a.n(n)},9376:function(e,s,a){"use strict";var n=a(5475);a.o(n,"useSearchParams")&&a.d(s,{useSearchParams:function(){return n.useSearchParams}})}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=3387)}),_N_E=e.O()}]);